"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9229],{8019:function(ie,M,n){var G=n(90228),m=n.n(G),X=n(87999),y=n.n(X),k=n(16941),h=n(68110),a=n(93236),j=n(81384),z=n(37090),f=n(62086),U=function(Z){var O=k.Z.useFormInstance(),S=(0,a.useRef)(null),x=function(){if(S.current){var v;O.setFieldValue(Z.name,(v=S.current)===null||v===void 0?void 0:v.getContent())}};return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(j.M,{onChange:x,onInit:function(v,R){return S.current=R},apiKey:"mn4nbwhddqp9jr1g1c3w17dkdu96ji7lr2fmolsncez1k3ng",init:{plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",file_picker_types:"file image media",file_picker_callback:function(v,R,b){if(b.filetype=="file"&&v("mypage.html",{text:"My text"}),b.filetype=="image"){var C=document.createElement("input");C.setAttribute("type","file"),C.setAttribute("accept","image/*"),C.addEventListener("change",function(){var p=y()(m()().mark(function B(J){var A,i,e;return m()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return A=J.target.files[0],i=new FormData,i.append("file",A),g.next=5,(0,z.request)("file/image/upload",{data:i,method:"POST"});case 5:e=g.sent,e&&(h.ZP.success("T\u1EA3i l\xEAn th\xE0nh c\xF4ng!"),v(e.url,{alt:"My alt text"}));case 7:case"end":return g.stop()}},B)}));return function(B){return p.apply(this,arguments)}}()),C.click()}b.filetype=="media"&&v("movie.mp4",{source2:"alt.ogg",poster:"image.jpg"})}},initialValue:O.getFieldValue(Z.name)})})};M.Z=U},632:function(ie,M,n){n.r(M),n.d(M,{default:function(){return le}});var G=n(90228),m=n.n(G),X=n(87999),y=n.n(X),k=n(48305),h=n.n(k),a=n(16941),j=n(68110),z=n(14292),f=n(55641),U=n(53739),_=n(69534),Z=n(97146),O=n(98659),S=n(19146),x=n(76477),L=n(95845),v=n(33122),R=n(53240),b=n(68307),C=n(47686),p=n(93236),B=n(69838),J=n(22717),A=n(8019),i=n(37090),e=n(62086),ee=function(K){var E=K.activeTab,Q=K.fetchData,$=a.Z.useForm(),Y=h()($,1),F=Y[0],w=function(){var c=y()(m()().mark(function T(P){var I;return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,i.request)("department/update-detail",{method:"POST",data:P});case 2:I=D.sent,I.succeeded&&j.ZP.success("Th\xE0nh c\xF4ng!");case 4:case"end":return D.stop()}},T)}));return function(P){return c.apply(this,arguments)}}();(0,p.useEffect)(function(){E&&(0,i.request)("department/detail/content/".concat(E)).then(function(c){c.data&&F.setFields([{name:"id",value:c.data.id},{name:"type",value:c.data.type},{name:"content",value:c.data.content}])})},[]);var W=function(){var c=y()(m()().mark(function T(){var P;return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,i.request)("department/detail/delete/".concat(E),{method:"POST"});case 3:P=l.sent,P.data&&(j.ZP.success("Th\xE0nh c\xF4ng!"),Q()),l.next=9;break;case 7:l.prev=7,l.t0=l.catch(0);case 9:case"end":return l.stop()}},T,null,[[0,7]])}));return function(){return c.apply(this,arguments)}}();return(0,e.jsxs)(a.Z,{form:F,layout:"vertical",onFinish:w,children:[(0,e.jsx)(a.Z.Item,{name:"id",hidden:!0,children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(a.Z.Item,{name:"type",label:"Ti\xEAu \u0111\u1EC1",required:!0,children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(a.Z.Item,{name:"content",label:"N\u1ED9i dung",required:!0,children:(0,e.jsx)(A.Z,{name:"content"})}),(0,e.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,e.jsx)(f.ZP,{type:"primary",htmlType:"submit",children:"L\u01B0u l\u1EA1i"}),(0,e.jsx)(U.Z,{title:"X\xE1c nh\u1EADn x\xF3a?",onConfirm:function(){return W()},children:(0,e.jsx)(f.ZP,{type:"primary",danger:!0,children:"X\xF3a"})})]})]})},g=function(){var K=(0,i.useParams)(),E=K.id,Q=(0,p.useState)(!1),$=h()(Q,2),Y=$[0],F=$[1],w=(0,p.useState)([]),W=h()(w,2),c=W[0],T=W[1],P=(0,p.useState)(),I=h()(P,2),l=I[0],D=I[1],de=a.Z.useForm(),oe=h()(de,1),ne=oe[0],me=(0,p.useState)([]),te=h()(me,2),ce=te[0],he=te[1],fe=(0,p.useState)([]),ae=h()(fe,2),ve=ae[0],pe=ae[1],je=(0,p.useState)(),re=h()(je,2),xe=re[0],se=re[1],Ee=a.Z.useForm(),Ze=h()(Ee,1),H=Ze[0],q=function(){(0,i.request)("department/detail/".concat(E)).then(function(t){T(t),t&&t.length>0&&se(t[0].id)})},N=function(){(0,i.request)("department/users-in-department/".concat(E)).then(function(t){pe(t)})};(0,p.useEffect)(function(){(0,i.request)("department/".concat(E)).then(function(r){D(r)}),q(),(0,i.request)("user/select").then(function(r){he(r)}),N()},[]);var ye=function(){var r=y()(m()().mark(function t(s){var d;return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(s.departmentId=E,!s.id){o.next=4;break}o.next=8;break;case 4:return o.next=6,(0,i.request)("department/add-detail",{method:"POST",data:s});case 6:d=o.sent,d.succeeded&&(j.ZP.success("Th\xE0nh c\xF4ng!"),F(!1),q());case 8:case"end":return o.stop()}},t)}));return function(s){return r.apply(this,arguments)}}(),ge=function(){var r=y()(m()().mark(function t(s){var d,V;return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,s.departmentId=E,!s.id){u.next=9;break}return u.next=5,(0,i.request)("department/update-user",{method:"POST",data:s});case 5:return d=u.sent,d.data&&(j.ZP.success("Th\xE0nh c\xF4ng!"),N()),H.resetFields(),u.abrupt("return");case 9:return u.next=11,(0,i.request)("department/add-user",{method:"POST",data:s});case 11:V=u.sent,V&&(j.ZP.success("Th\xE0nh c\xF4ng!"),N()),H.resetFields(),u.next=20;break;case 16:u.prev=16,u.t0=u.catch(0),console.log(u.t0),j.ZP.error("C\xF3 l\u1ED7i x\u1EA3y ra!");case 20:case"end":return u.stop()}},t,null,[[0,16]])}));return function(s){return r.apply(this,arguments)}}(),Te=function(t,s){var d;return((d=s==null?void 0:s.label)!==null&&d!==void 0?d:"").toLowerCase().includes(t.toLowerCase())},Pe=function(){var r=y()(m()().mark(function t(s){var d;return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,i.request)("department/remove-user/".concat(s),{method:"POST"});case 2:d=o.sent,d.succeeded&&(j.ZP.success("Th\xE0nh c\xF4ng!"),N());case 4:case"end":return o.stop()}},t)}));return function(s){return r.apply(this,arguments)}}(),De=function(t){H.setFields([{name:"id",value:t.id},{name:"userId",value:t.userId},{name:"rank",value:t.rank},{name:"type",value:t.type},{name:"jobTitle",value:t.jobTitle}])},Ce=[{title:"Rank",dataIndex:"rank"},{title:"H\u1ECD v\xE0 t\xEAn",dataIndex:"name"},{title:"Ch\u1EE9c danh",dataIndex:"jobTitle"},{title:"T\xE1c v\u1EE5",render:function(t,s){return(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(f.ZP,{icon:(0,e.jsx)(B.Z,{}),onClick:function(){return De(s)}}),(0,e.jsx)(U.Z,{title:"X\xE1c nh\u1EADn x\xF3a?",onConfirm:function(){return Pe(s.id)},children:(0,e.jsx)(f.ZP,{type:"primary",danger:!0,icon:(0,e.jsx)(J.Z,{})})})]})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_.Z,{gutter:16,children:[(0,e.jsx)(Z.Z,{span:16,children:(0,e.jsx)(O.Z,{title:l==null?void 0:l.name,extra:(0,e.jsx)(f.ZP,{type:"primary",onClick:function(){ne.resetFields(),F(!0)},children:"Th\xEAm m\u1EDBi"}),children:(0,e.jsx)(S.Z,{type:"card",onChange:function(t){se(t)},items:c==null?void 0:c.map(function(r){return{label:r.type,key:r.id,children:(0,e.jsx)(ee,{activeTab:xe,fetchData:q})}})})})}),(0,e.jsx)(Z.Z,{span:8,children:(0,e.jsxs)(O.Z,{title:"C\u01A1 c\u1EA5u t\u1ED5 ch\u1EE9c",children:[(0,e.jsxs)(a.Z,{layout:"vertical",onFinish:ge,form:H,children:[(0,e.jsx)(a.Z.Item,{name:"id",hidden:!0,children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(a.Z.Item,{name:"userId",label:"Th\xE0nh vi\xEAn",rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn th\xE0nh vi\xEAn"}],children:(0,e.jsx)(L.Z,{options:ce,showSearch:!0,filterOption:Te})}),(0,e.jsxs)(_.Z,{gutter:8,children:[(0,e.jsx)(Z.Z,{span:6,children:(0,e.jsx)(a.Z.Item,{name:"rank",label:"Rank",children:(0,e.jsx)(v.Z,{className:"w-full"})})}),(0,e.jsx)(Z.Z,{span:9,children:(0,e.jsx)(a.Z.Item,{name:"type",required:!0,label:"Nh\xF3m",children:(0,e.jsx)(x.Z,{})})}),(0,e.jsx)(Z.Z,{span:9,children:(0,e.jsx)(a.Z.Item,{name:"jobTitle",label:"Ch\u1EE9c danh",children:(0,e.jsx)(x.Z,{})})})]}),(0,e.jsx)(a.Z.Item,{children:(0,e.jsx)(f.ZP,{type:"primary",htmlType:"submit",className:"w-full",children:"L\u01B0u l\u1EA1i"})})]}),(0,e.jsx)(R.Z,{children:"Th\xE0nh vi\xEAn trong Vi\u1EC7n - Khoa"}),(0,e.jsx)(b.Z,{dataSource:ve,rowKey:"id",columns:Ce})]})})]}),(0,e.jsx)(C.Z,{title:"Khoa - Vi\u1EC7n",open:Y,onCancel:function(){F(!1)},footer:!1,children:(0,e.jsxs)(a.Z,{layout:"vertical",onFinish:ye,form:ne,children:[(0,e.jsx)(a.Z.Item,{name:"id",hidden:!0,children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(a.Z.Item,{label:"Nh\xF3m",name:"type",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp t\xEAn nh\xF3m"}],children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(a.Z.Item,{label:"N\u1ED9i dung",name:"content",required:!0,children:(0,e.jsx)(A.Z,{name:"content"})}),(0,e.jsx)(a.Z.Item,{label:"Th\u1EE9 t\u1EF1",name:"sortOrder",required:!0,children:(0,e.jsx)(v.Z,{})}),(0,e.jsx)(a.Z.Item,{children:(0,e.jsx)(f.ZP,{type:"primary",htmlType:"submit",children:"L\u01B0u l\u1EA1i"})})]})})]})},le=g}}]);
