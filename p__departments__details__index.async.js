"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9229],{8019:function(de,U,t){var k=t(90228),h=t.n(k),z=t(87999),y=t.n(z),J=t(68110),f=t(93236),a=t(81384),x=t(37090),L=t(54885),u=t(62086),R=function(v){var B=L.A.useFormInstance(),g=(0,f.useRef)(null),E=function(){if(g.current){var p;B.setFieldValue(v.name,(p=g.current)===null||p===void 0?void 0:p.getContent())}};return(0,f.useEffect)(function(){!v.initialValue&&g.current&&g.current.setContent("")},[v.initialValue]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)(L.A.Item,{hidden:!0,name:v.name}),(0,u.jsx)("div",{className:"mb-2",children:v.label}),(0,u.jsx)(a.M,{onChange:E,onInit:function(p,$){g.current=$},apiKey:"mn4nbwhddqp9jr1g1c3w17dkdu96ji7lr2fmolsncez1k3ng",init:{plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",file_picker_types:"file image media",file_picker_callback:function(p,$,S){if(S.filetype==="file"&&p("mypage.html",{text:"My text"}),S.filetype==="image"){var I=document.createElement("input");I.setAttribute("type","file"),I.setAttribute("accept","image/*"),I.addEventListener("change",function(){var j=y()(h()().mark(function V(Y){var b,i,e;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return b=Y.target.files[0],i=new FormData,i.append("file",b),T.next=5,(0,x.request)("file/image/upload",{data:i,method:"POST"});case 5:e=T.sent,e&&(J.ZP.success("T\u1EA3i l\xEAn th\xE0nh c\xF4ng!"),p(e.url,{alt:"My alt text"}));case 7:case"end":return T.stop()}},V)}));return function(V){return j.apply(this,arguments)}}()),I.click()}S.filetype==="media"&&p("movie.mp4",{source2:"alt.ogg",poster:"image.jpg"})}},initialValue:v.initialValue})]})})};U.Z=R},632:function(de,U,t){t.r(U),t.d(U,{default:function(){return oe}});var k=t(90228),h=t.n(k),z=t(87999),y=t.n(z),J=t(48305),f=t.n(J),a=t(16941),x=t(68110),L=t(14292),u=t(55641),R=t(53739),Q=t(69534),v=t(97146),B=t(98659),g=t(19146),E=t(76477),K=t(95845),p=t(33122),$=t(53240),S=t(37560),I=t(47686),j=t(93236),V=t(69838),Y=t(22717),b=t(8019),i=t(37090),e=t(62086),re=function(W){var Z=W.activeTab,w=W.fetchData,H=a.Z.useForm(),q=f()(H,1),O=q[0],ee=(0,j.useState)(),A=f()(ee,2),P=A[0],te=A[1],ne=function(){var d=y()(h()().mark(function D(C){var M;return h()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,i.request)("department/update-detail",{method:"POST",data:C});case 2:M=F.sent,M.succeeded&&x.ZP.success("Th\xE0nh c\xF4ng!");case 4:case"end":return F.stop()}},D)}));return function(C){return d.apply(this,arguments)}}();(0,j.useEffect)(function(){Z&&(0,i.request)("department/detail/content/".concat(Z)).then(function(d){d.data&&(O.setFields([{name:"id",value:d.data.id},{name:"type",value:d.data.type},{name:"content",value:d.data.content}]),te(d.data))})},[]);var N=function(){var d=y()(h()().mark(function D(){var C;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,i.request)("department/detail/delete/".concat(Z),{method:"POST"});case 3:C=o.sent,C.data&&(x.ZP.success("Th\xE0nh c\xF4ng!"),w()),o.next=9;break;case 7:o.prev=7,o.t0=o.catch(0);case 9:case"end":return o.stop()}},D,null,[[0,7]])}));return function(){return d.apply(this,arguments)}}();return(0,e.jsxs)(a.Z,{form:O,layout:"vertical",onFinish:ne,children:[(0,e.jsx)(a.Z.Item,{name:"id",hidden:!0,children:(0,e.jsx)(E.Z,{})}),(0,e.jsx)(a.Z.Item,{name:"type",label:"Ti\xEAu \u0111\u1EC1",required:!0,children:(0,e.jsx)(E.Z,{})}),(0,e.jsx)(b.Z,{name:"content",label:"N\u1ED9i dung",required:!0,initialValue:P==null?void 0:P.content}),(0,e.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,e.jsx)(u.ZP,{type:"primary",htmlType:"submit",children:"L\u01B0u l\u1EA1i"}),(0,e.jsx)(R.Z,{title:"X\xE1c nh\u1EADn x\xF3a?",onConfirm:function(){return N()},children:(0,e.jsx)(u.ZP,{type:"primary",danger:!0,children:"X\xF3a"})})]})]})},T=function(){var W=(0,i.useParams)(),Z=W.id,w=(0,j.useState)(!1),H=f()(w,2),q=H[0],O=H[1],ee=(0,j.useState)([]),A=f()(ee,2),P=A[0],te=A[1],ne=(0,j.useState)(),N=f()(ne,2),d=N[0],D=N[1],C=a.Z.useForm(),M=f()(C,1),o=M[0],F=(0,j.useState)([]),se=f()(F,2),ce=se[0],he=se[1],fe=(0,j.useState)([]),ie=f()(fe,2),ve=ie[0],pe=ie[1],je=(0,j.useState)(),le=f()(je,2),xe=le[0],ue=le[1],Ee=a.Z.useForm(),Ze=f()(Ee,1),_=Ze[0],ae=function(){(0,i.request)("department/detail/".concat(Z)).then(function(n){te(n),n&&n.length>0&&ue(n[0].id)})},G=function(){(0,i.request)("department/users-in-department/".concat(Z)).then(function(n){pe(n)})};(0,j.useEffect)(function(){(0,i.request)("department/".concat(Z)).then(function(r){D(r)}),ae(),(0,i.request)("user/select").then(function(r){he(r)}),G()},[]);var ye=function(){var r=y()(h()().mark(function n(s){var m;return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s.departmentId=Z,!s.id){c.next=4;break}c.next=8;break;case 4:return c.next=6,(0,i.request)("department/add-detail",{method:"POST",data:s});case 6:m=c.sent,m.succeeded&&(x.ZP.success("Th\xE0nh c\xF4ng!"),O(!1),ae());case 8:case"end":return c.stop()}},n)}));return function(s){return r.apply(this,arguments)}}(),ge=function(){var r=y()(h()().mark(function n(s){var m,X;return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(l.prev=0,s.departmentId=Z,!s.id){l.next=9;break}return l.next=5,(0,i.request)("department/update-user",{method:"POST",data:s});case 5:return m=l.sent,m.data&&(x.ZP.success("Th\xE0nh c\xF4ng!"),G()),_.resetFields(),l.abrupt("return");case 9:return l.next=11,(0,i.request)("department/add-user",{method:"POST",data:s});case 11:X=l.sent,X&&(x.ZP.success("Th\xE0nh c\xF4ng!"),G()),_.resetFields(),l.next=20;break;case 16:l.prev=16,l.t0=l.catch(0),console.log(l.t0),x.ZP.error("C\xF3 l\u1ED7i x\u1EA3y ra!");case 20:case"end":return l.stop()}},n,null,[[0,16]])}));return function(s){return r.apply(this,arguments)}}(),Te=function(n,s){var m;return((m=s==null?void 0:s.label)!==null&&m!==void 0?m:"").toLowerCase().includes(n.toLowerCase())},Pe=function(){var r=y()(h()().mark(function n(s){var m;return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,i.request)("department/remove-user/".concat(s),{method:"POST"});case 2:m=c.sent,m.succeeded&&(x.ZP.success("Th\xE0nh c\xF4ng!"),G());case 4:case"end":return c.stop()}},n)}));return function(s){return r.apply(this,arguments)}}(),De=function(n){_.setFields([{name:"id",value:n.id},{name:"userId",value:n.userId},{name:"rank",value:n.rank},{name:"type",value:n.type},{name:"jobTitle",value:n.jobTitle}])},Ce=[{title:"Rank",dataIndex:"rank"},{title:"H\u1ECD v\xE0 t\xEAn",dataIndex:"name"},{title:"Ch\u1EE9c danh",dataIndex:"jobTitle"},{title:"T\xE1c v\u1EE5",render:function(n,s){return(0,e.jsxs)(L.Z,{children:[(0,e.jsx)(u.ZP,{icon:(0,e.jsx)(V.Z,{}),onClick:function(){return De(s)}}),(0,e.jsx)(R.Z,{title:"X\xE1c nh\u1EADn x\xF3a?",onConfirm:function(){return Pe(s.id)},children:(0,e.jsx)(u.ZP,{type:"primary",danger:!0,icon:(0,e.jsx)(Y.Z,{})})})]})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Q.Z,{gutter:16,children:[(0,e.jsx)(v.Z,{span:16,children:(0,e.jsx)(B.Z,{title:d==null?void 0:d.name,extra:(0,e.jsx)(u.ZP,{type:"primary",onClick:function(){o.resetFields(),O(!0)},children:"Th\xEAm m\u1EDBi"}),children:(0,e.jsx)(g.Z,{type:"card",onChange:function(n){ue(n)},items:P==null?void 0:P.map(function(r){return{label:r.type,key:r.id,children:(0,e.jsx)(re,{activeTab:xe,fetchData:ae})}})})})}),(0,e.jsx)(v.Z,{span:8,children:(0,e.jsxs)(B.Z,{title:"C\u01A1 c\u1EA5u t\u1ED5 ch\u1EE9c",children:[(0,e.jsxs)(a.Z,{layout:"vertical",onFinish:ge,form:_,children:[(0,e.jsx)(a.Z.Item,{name:"id",hidden:!0,children:(0,e.jsx)(E.Z,{})}),(0,e.jsx)(a.Z.Item,{name:"userId",label:"Th\xE0nh vi\xEAn",rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn th\xE0nh vi\xEAn"}],children:(0,e.jsx)(K.Z,{options:ce,showSearch:!0,filterOption:Te})}),(0,e.jsxs)(Q.Z,{gutter:8,children:[(0,e.jsx)(v.Z,{span:6,children:(0,e.jsx)(a.Z.Item,{name:"rank",label:"Rank",children:(0,e.jsx)(p.Z,{className:"w-full"})})}),(0,e.jsx)(v.Z,{span:9,children:(0,e.jsx)(a.Z.Item,{name:"type",required:!0,label:"Nh\xF3m",children:(0,e.jsx)(E.Z,{})})}),(0,e.jsx)(v.Z,{span:9,children:(0,e.jsx)(a.Z.Item,{name:"jobTitle",label:"Ch\u1EE9c danh",children:(0,e.jsx)(E.Z,{})})})]}),(0,e.jsx)(a.Z.Item,{children:(0,e.jsx)(u.ZP,{type:"primary",htmlType:"submit",className:"w-full",children:"L\u01B0u l\u1EA1i"})})]}),(0,e.jsx)($.Z,{children:"Th\xE0nh vi\xEAn trong Vi\u1EC7n - Khoa"}),(0,e.jsx)(S.Z,{dataSource:ve,rowKey:"id",columns:Ce})]})})]}),(0,e.jsx)(I.Z,{title:"Khoa - Vi\u1EC7n",open:q,onCancel:function(){O(!1)},footer:!1,children:(0,e.jsxs)(a.Z,{layout:"vertical",onFinish:ye,form:o,children:[(0,e.jsx)(a.Z.Item,{name:"id",hidden:!0,children:(0,e.jsx)(E.Z,{})}),(0,e.jsx)(a.Z.Item,{label:"Nh\xF3m",name:"type",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp t\xEAn nh\xF3m"}],children:(0,e.jsx)(E.Z,{})}),(0,e.jsx)(b.Z,{name:"content",label:"N\u1ED9i dung"}),(0,e.jsx)(a.Z.Item,{label:"Th\u1EE9 t\u1EF1",name:"sortOrder",required:!0,children:(0,e.jsx)(p.Z,{})}),(0,e.jsx)(a.Z.Item,{children:(0,e.jsx)(u.ZP,{type:"primary",htmlType:"submit",children:"L\u01B0u l\u1EA1i"})})]})})]})},oe=T}}]);
