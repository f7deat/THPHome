"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5538],{78837:function(V,D,e){var i=e(60430),y=e.n(i),M=e(53939),t=e.n(M),O=e(83134),_=e.n(O),P=e(34827),u=e.n(P),g=e(41641),E=e(83294),f=e(26494),r=e(46665),X=e(18186),Y=e(62960),F=e(10483),Q=e(13755),v=e(68136),o=e(33130),J=function(d){var U=(0,v.useState)(""),Z=u()(U,2),n=Z[0],K=Z[1],k=(0,v.useState)([]),W=u()(k,2),C=W[0],L=W[1],q=(0,v.useState)(!1),A=u()(q,2),H=A[0],N=A[1];function ee(x){var c;try{c=new URL(x)}catch(h){return!1}return c.protocol==="https:"}var ne=function(){var x=_()(t()().mark(function c(){var h,p;return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(C.length>0)){s.next=15;break}return h=new FormData,C.forEach(function(B){h.append("file",B)}),N(!0),s.next=6,(0,g.IO)(h);case 6:if(p=s.sent,N(!1),p.succeeded){s.next=11;break}return r.ZP.error(p.message),s.abrupt("return");case 11:return L([]),d.onFinish(p),d.onCancel(),s.abrupt("return");case 15:if(ee(n)){s.next=18;break}return r.ZP.error("Sorry, URL failed to upload."),s.abrupt("return");case 18:d.onFinish({url:n,succeeded:!0}),K(""),d.onCancel();case 21:case"end":return s.stop()}},c)}));return function(){return x.apply(this,arguments)}}();return(0,o.jsxs)(X.Z,{open:d.open,onCancel:function(){return d.onCancel()},centered:!0,title:"Upload",onOk:ne,confirmLoading:H,children:[(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)(Q.Z,{fileList:C,onRemove:function(c){var h=C.indexOf(c),p=C.slice();p.splice(h,1),L(p)},beforeUpload:function(c){return L([].concat(y()(C),[c])),!1},maxCount:1,children:[(0,o.jsx)("p",{className:"ant-upload-drag-icon",children:(0,o.jsx)(E.Z,{})}),(0,o.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,o.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]})}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsxs)("div",{className:"font-medium flex items-center gap-2 justify-center text-blue-500 text-base",children:[" ",(0,o.jsx)(f.Z,{})," Choose from your computer"]})}),(0,o.jsx)(Y.Z,{children:"or"}),(0,o.jsx)(F.Z,{placeholder:"Paste image or URL",onChange:function(c){return K(c.currentTarget.value)}})]})};D.Z=J},12551:function(V,D,e){e.r(D),e.d(D,{default:function(){return x}});var i=e(78095),y=e.n(i),M=e(53939),t=e.n(M),O=e(83134),_=e.n(O),P=e(34827),u=e.n(P),g=e(64073),E=e(63687),f=e(60096),r=e(79392),X=e(18186),Y=e(13762),F=e(2537),Q=e(20782),v=e(15621),o=e(24657),J=e(62380),w=e(78837),d=e(68136),U=e(41641),Z=e(26805),n=e(33130),K=function(h){var p=h.open,z=h.setOpen,s=(0,d.useState)(!1),B=u()(s,2),G=B[0],b=B[1],S=(0,d.useRef)(),I=(0,d.useState)(),$=u()(I,2),R=$[0],te=$[1],re=function(){var a;(a=S.current)===null||a===void 0||a.reload()};return(0,n.jsxs)(X.Z,{width:1e3,open:p,title:"File Explorer",onCancel:function(){return z(!1)},footer:!1,centered:!0,children:[(0,n.jsxs)(Y.Z,{gutter:16,children:[(0,n.jsx)(F.Z,{span:18,children:(0,n.jsx)(f.Z,{search:!1,columns:[{title:"#",valueType:"indexBorder"},{title:"Name",dataIndex:"fileName",render:function(a,m){return(0,n.jsx)(Q.Z,{title:a,children:(0,n.jsx)(v.ZP,{size:"small",onClick:function(){return te(m)},type:"text",style:{maxWidth:300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a})})}},{title:"Size",dataIndex:"size",render:function(a,m){return(0,Z.gB)(m.size)}},{title:"Upload",dataIndex:"createdDate",valueType:"dateTime",width:200},{title:"T\xE1c v\u1EE5",valueType:"option",render:function(){return[(0,n.jsx)(v.ZP,{size:"small",type:"text",icon:(0,n.jsx)(g.Z,{})})]},width:60}],size:"small",request:U.t4,actionRef:S,ghost:!0,toolBarRender:function(){return[(0,n.jsx)(v.ZP,{icon:(0,n.jsx)(E.Z,{}),type:"primary",onClick:function(){return b(!0)},children:"Upload"},"upload")]},pagination:{pageSize:5}})}),(0,n.jsx)(F.Z,{span:6,children:(0,n.jsx)(r.Z,{size:"small",title:"Preview",headerBordered:!0,bordered:!0,children:R?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(o.Z,{src:R.url,height:150,style:{objectFit:"contain"}})}),(0,n.jsxs)("div",{className:"mb-2",children:["Size: ",(0,Z.gB)(R.size)]}),(0,n.jsx)(v.ZP,{className:"w-full",type:"primary",children:"Ch\u1ECDn"})]}):(0,n.jsx)(J.Z,{})})})]}),(0,n.jsx)(w.Z,{open:G,onCancel:function(){return b(!1)},onFinish:re})]})},k=K,W=e(70524),C=e(25223),L=e(81068),q=e(40225),A=e(58703),H=e(46665),N=e(41605),ee=e(30339),ne=function(){var h=(0,d.useState)(!1),p=u()(h,2),z=p[0],s=p[1],B=(0,d.useState)(!1),G=u()(B,2),b=G[0],S=G[1],I=(0,d.useRef)(),$=(0,A.useParams)(),R=$.id,te=function(){var l=_()(t()().mark(function a(m){var T;return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return m.galleryId=R,m.fileId=m.id,j.next=4,(0,U.pA)(m);case 4:H.ZP.success("T\u1EA3i l\xEAn th\xE0nh c\xF4ng!"),(T=I.current)===null||T===void 0||T.reload();case 6:case"end":return j.stop()}},a)}));return function(m){return l.apply(this,arguments)}}(),re=function(){var l=_()(t()().mark(function a(m){var T;return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,U.kd)(m);case 2:H.ZP.success("X\xF3a th\xE0nh c\xF4ng!"),(T=I.current)===null||T===void 0||T.reload();case 4:case"end":return j.stop()}},a)}));return function(m){return l.apply(this,arguments)}}();return(0,n.jsxs)(L._z,{extra:(0,n.jsxs)(N.Z,{children:[(0,n.jsx)(v.ZP,{icon:(0,n.jsx)(E.Z,{}),type:"primary",onClick:function(){return S(!0)},children:"T\u1EA3i l\xEAn"}),(0,n.jsx)(v.ZP,{icon:(0,n.jsx)(W.Z,{}),onClick:function(){return A.history.back()},children:"Quay l\u1EA1i"})]}),children:[(0,n.jsx)(q.Rs,{actionRef:I,ghost:!0,pagination:{defaultPageSize:18},request:function(a){return(0,U.vs)(y()(y()({},a),{},{galleryId:R}))},grid:{gutter:16,column:6},renderItem:function(a){return(0,n.jsxs)("div",{className:"bg-white shadow",children:[(0,n.jsx)(o.Z,{src:a.url,className:"w-full object-cover",height:180,wrapperClassName:"w-full"}),(0,n.jsx)("div",{className:"p-1 flex justify-center",children:(0,n.jsx)(ee.Z,{title:"X\xE1c nh\u1EADn x\xF3a",onConfirm:function(){return re(a.id)},children:(0,n.jsx)(v.ZP,{type:"text",icon:(0,n.jsx)(C.Z,{}),size:"small",danger:!0})})})]})}}),(0,n.jsx)(k,{open:z,setOpen:s}),(0,n.jsx)(w.Z,{open:b,onCancel:function(){return S(!1)},onFinish:te})]})},x=ne},41641:function(V,D,e){e.d(D,{IO:function(){return y},NR:function(){return u},TD:function(){return g},cI:function(){return P},ib:function(){return E},kd:function(){return _},pA:function(){return O},t4:function(){return M},vs:function(){return t}});var i=e(58703),y=function(r){return(0,i.request)("file/upload",{method:"POST",data:r,headers:{"Content-Type":"multipart/form-data"}})},M=function(r){return(0,i.request)("file/list",{params:r})},t=function(r){return(0,i.request)("gallery/photo/list",{params:r})},O=function(r){return(0,i.request)("gallery/photo/add",{method:"POST",data:r})},_=function(r){return(0,i.request)("gallery/photo/".concat(r),{method:"DELETE"})},P=function(){return(0,i.request)("gallery/list")},u=function(r){return(0,i.request)("gallery",{method:"POST",data:r})},g=function(r){return(0,i.request)("gallery",{method:"PUT",data:r})},E=function(r){return(0,i.request)("gallery/".concat(r),{method:"DELETE"})}},26805:function(V,D,e){e.d(D,{dK:function(){return y},gB:function(){return M}});function i(t){return t.trim()}function y(t){return t?t==="vi-VN"?1:2:1}function M(t){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=O?1e3:1024;if(Math.abs(t)<P)return t+" B";var u=O?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],g=-1,E=Math.pow(10,_);do t/=P,++g;while(Math.round(Math.abs(t)*E)/E>=P&&g<u.length-1);return t.toFixed(_)+" "+u[g]}}}]);
