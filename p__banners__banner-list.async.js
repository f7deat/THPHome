"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2574],{49799:function(H,h,e){e.d(h,{Z:function(){return u}});var D=e(52643),r=e(68136),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},c=v,x=e(91471),O=function(m,C){return r.createElement(x.Z,(0,D.Z)({},m,{ref:C,icon:c}))},u=r.forwardRef(O)},63687:function(H,h,e){e.d(h,{Z:function(){return u}});var D=e(52643),r=e(68136),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},c=v,x=e(91471),O=function(m,C){return r.createElement(x.Z,(0,D.Z)({},m,{ref:C,icon:c}))},u=r.forwardRef(O)},54532:function(H,h,e){e.r(h),e.d(h,{default:function(){return K}});var D=e(78095),r=e.n(D),v=e(34827),c=e.n(v),x=e(24991),O=e(4870),u=e(46665),y=e(13762),m=e(2537),C=e(30339),M=e(24657),V=e(78491),p=e(10483),U=e(41605),z=e(18801),S=e(15621),$=e(88821),G=e(49799),J=e(25223),B=e(63687),Y=e(55772),E=e(68136),P=function(d){return d[d.DEFAULT=0]="DEFAULT",d[d.SLIDE=1]="SLIDE",d[d.POST=2]="POST",d[d.PHOTO=3]="PHOTO",d}(P||{}),Q=[{id:P.DEFAULT,name:"Default"},{id:P.SLIDE,name:"Slide"},{id:P.POST,name:"Post"},{id:P.PHOTO,name:"Photo"}],W=e(14613),t=e(58703),X=e(81068),g=e(64235),n=e(33130),A=x.Z.Option,_=function(){var w=(0,E.useState)(!1),R=c()(w,2),N=R[0],Z=R[1],k=(0,E.useState)(),T=c()(k,2),o=T[0],L=T[1],q=(0,E.useState)(),F=c()(q,2),b=F[0],ee=F[1],ne=(0,E.useState)(P.PHOTO),l=c()(ne,2),i=l[0],f=l[1],te=(0,E.useState)(!1),ie=c()(te,2),ce=ie[0],ae=ie[1],ue=O.Z.useForm(),ve=c()(ue,1),se=ve[0],oe=Q.map(function(a){return(0,n.jsx)(A,{value:a.id,children:a.name},a.id)}),I=(0,E.useCallback)(function(){(0,t.request)("banner/get-list?type=".concat(i)).then(function(a){ee(a)})},[i]);(0,E.useEffect)(function(){I()},[I]);var re=function(s){f(s.type||P.PHOTO),L(s),Z(!0)},fe=function(){Z(!1)},me=function(){o.image=se.getFieldValue("image"),o.id?(0,t.request)("banner/update",{method:"POST",data:o}).then(function(s){s.succeeded&&(I(),u.ZP.success("succeeded!"),Z(!1))}):(0,t.request)("banner/add",{method:"POST",data:o}).then(function(s){s.succeeded&&(I(),u.ZP.success("succeeded!"),Z(!1))})};function he(a){(0,t.request)("banner/delete/".concat(a),{method:"POST"}).then(function(s){s.succeeded&&(I(),u.ZP.success("succeeded!"))})}function xe(a){he(a)}var Oe=function(){ae(!0)},Ee=function(){ae(!1)},Pe=function(s){return s.startsWith("http")?s:"https://dhhp.edu.vn".concat(s)};return(0,n.jsxs)(X._z,{children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(x.Z,{defaultValue:i,style:{width:120},onChange:function(s){return f(s)},children:oe})}),(0,n.jsxs)(y.Z,{gutter:16,children:[(0,n.jsx)(m.Z,{span:6,children:(0,n.jsx)(g.Z,{className:"h-full flex items-center justify-center mb-4",onClick:function(){return re({})},children:(0,n.jsx)($.Z,{})})}),b&&b.map(function(a){return(0,n.jsx)(m.Z,{span:6,children:(0,n.jsx)(g.Z,{className:"mb-4",actions:[(0,n.jsx)(G.Z,{onClick:function(){return re(a)}},"edit"),(0,n.jsx)(C.Z,{title:"Are you sure to delete?",okText:"Yes",cancelText:"No",onConfirm:function(){return xe(a.id)},children:(0,n.jsx)(J.Z,{})},"delete")],children:(0,n.jsx)("div",{className:"relative w-full bg-white border border-dashed border-gray-500 flex justify-center items-center hover:border-blue-600 hover:text-blue-600",children:(0,n.jsx)(M.Z,{src:Pe(a.image),alt:a.name,height:200,wrapperClassName:"w-full",style:{objectFit:"cover"}})})})},a.id)})]}),(0,n.jsx)(V.Z,{title:"Banner",placement:"right",closable:!1,onClose:fe,visible:N,width:700,children:(0,n.jsxs)(O.Z,{form:se,layout:"vertical",children:[(0,n.jsx)("div",{children:"Name"}),(0,n.jsx)(p.Z,{className:"mb-2",value:o==null?void 0:o.name,onChange:function(s){return L(function(j){return r()(r()({},j),{},{name:s.target.value})})}}),(0,n.jsx)("div",{className:"flex mb-2",children:(0,n.jsxs)(U.Z,{children:[(0,n.jsx)(O.Z.Item,{name:"image",label:"Image",children:(0,n.jsx)(p.Z,{})}),(0,n.jsx)(z.Z,{beforeUpload:function(s){var j=s.type==="image/jpeg"||s.type==="image/png";if(j){var de=new FormData;return de.append("file",s),(0,t.request)("file/upload",{method:"POST",data:de}).then(function(le){if(!le.succeeded)return u.ZP.error(le.message),!1;se.setFieldValue("image",le.url)}),!1}else return u.ZP.error("You can only upload JPG or PNG file!"),!1},maxCount:1,showUploadList:!1,children:(0,n.jsx)(S.ZP,{icon:(0,n.jsx)(B.Z,{}),children:"T\u1EA3i l\xEAn"})}),(0,n.jsx)(S.ZP,{icon:(0,n.jsx)(B.Z,{}),onClick:Oe,children:"Duy\u1EC7t"})]})}),(0,n.jsx)("div",{children:"Url"}),(0,n.jsx)(p.Z,{className:"mb-2",value:o==null?void 0:o.url,onChange:function(s){return L(function(j){return r()(r()({},j),{},{url:s.target.value})})}}),(0,n.jsx)("div",{children:"Display On"}),(0,n.jsx)(p.Z,{className:"mb-2",value:o==null?void 0:o.displayOn,onChange:function(s){return L(function(j){return r()(r()({},j),{},{displayOn:Number(s.target.value)})})}}),(0,n.jsx)("div",{children:"Type"}),(0,n.jsx)(x.Z,{defaultValue:o==null?void 0:o.type,style:{width:"100%"},onChange:function(s){return L(function(j){return r()(r()({},j),{},{type:s})})},className:"mb-3",children:oe}),(0,n.jsx)(S.ZP,{type:"primary",icon:(0,n.jsx)(Y.Z,{}),onClick:me,children:"L\u01B0u"})]})}),(0,n.jsx)(W.default,{visible:ce,onOk:Ee,onCancel:function(){return ae(!1)}})]})},K=_},14613:function(H,h,e){e.r(h),e.d(h,{default:function(){return X}});var D=e(34827),r=e.n(D),v=e(46665),c=e(24657),x=e(62380),O=e(78491),u=e(41605),y=e(10483),m=e(15621),C=e(13762),M=e(2537),V=e(67036),p=e(30339),U=e(68136),z=e(83294),S=e(54619),$=e(47485),G=e(1820),J=e(34180),B=e(55772),Y=e(87358),E=e(13755),P=e(46555),Q=e.n(P),W=e(58703),t=e(33130);function X(g){var n,A,_=(0,U.useState)([]),K=r()(_,2),d=K[0],w=K[1],R=(0,U.useState)(""),N=r()(R,2),Z=N[0],k=N[1];(0,U.useEffect)(function(){g.visible&&T()},[g.visible]);function T(){(0,W.request)("file/directories").then(function(l){w(l)})}var o=function(){if(!Z)return v.ZP.warning("Please choose a file!");g.onOk(Z)};function L(l){}function q(l){k(l)}var F=function(i){var f=i.file.status;f!=="uploading"&&console.log(i.file,i.fileList),f==="done"?(v.ZP.success("".concat(i.file.name," file uploaded successfully.")),T()):f==="error"&&v.ZP.error("".concat(i.file.name," file upload failed."))};function b(l){(0,W.request)("/api/file/delete",{method:"POST",data:{fullName:l}}).then(function(i){i.data.succeeded?(T(),v.ZP.success(i.data.message)):v.ZP.error(i.data.message)})}function ee(l){var i,f=["jpeg","jpg","png","gif","bmp"],te=((i=l.split(".").pop())===null||i===void 0?void 0:i.toLowerCase())||"";return f.includes(te)}function ne(l){return ee(l.name)?(0,t.jsx)("div",{children:(0,t.jsx)(c.Z,{src:l.fullName,width:200})}):(0,t.jsx)(x.Z,{})}return(0,t.jsxs)(O.Z,{title:"File Explorer",placement:"right",closable:!1,visible:g.visible,width:900,children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)(E.Z,{action:"/api/file/upload",onChange:F,children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(z.Z,{})}),(0,t.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,t.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]})}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)(u.Z,{className:"mb-2",children:[(0,t.jsx)(y.Z,{}),(0,t.jsx)(m.ZP,{type:"primary",icon:(0,t.jsx)(S.Z,{})})]}),(0,t.jsxs)("div",{className:"border",style:{minHeight:"calc(100vh - 360px)"},children:[d==null||(n=d.folders)===null||n===void 0?void 0:n.map(function(l,i){return(0,t.jsxs)("div",{className:"px-2 py-1 hover:bg-gray-100 cursor-pointer",onDoubleClick:function(){return void 0},children:[(0,t.jsx)($.Z,{className:"mr-2"}),l.name]},i)}),d==null||(A=d.files)===null||A===void 0?void 0:A.map(function(l,i){return(0,t.jsx)("button",{className:"px-2 py-1 hover:bg-gray-100 w-full text-left bg-white focus:bg-gray-100",onClick:function(){return q(l)},children:(0,t.jsxs)(C.Z,{className:"items-center",children:[(0,t.jsx)(M.Z,{span:12,children:(0,t.jsxs)(V.Z,{content:ne(l),title:"Preview",children:[(0,t.jsx)(G.Z,{className:"mr-2"}),l.name]})}),(0,t.jsx)(M.Z,{span:6,children:Q()(l.lastWriteTime).format("MM/DD/YYYY h:mm:ss A")}),(0,t.jsxs)(M.Z,{span:3,children:[l.length," KB"]}),(0,t.jsx)(M.Z,{span:3,className:"text-right",children:(0,t.jsx)(p.Z,{title:"Are you sure to delete?",okText:"Yes",cancelText:"No",onConfirm:function(){return b(l.fullName)},children:(0,t.jsx)(J.Z,{twoToneColor:"red"})})})]})},i)})]})]}),(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(m.ZP,{onClick:o,icon:(0,t.jsx)(B.Z,{}),type:"primary",children:"Ok"}),(0,t.jsx)(m.ZP,{onClick:g.onCancel,icon:(0,t.jsx)(Y.Z,{}),children:"Close"})]})]})}}}]);
