"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2912],{29904:function(Ee,O,n){n.r(O),n.d(O,{default:function(){return ie}});var D=n(90228),Z=n.n(D),V=n(87999),I=n.n(V),H=n(48305),g=n.n(H),u=n(68110),p=n(14292),h=n(55641),L=n(53739),B=n(43772),$=n(47686),x=n(76477),F=n(37560),G=n(29690),v=n(16941),a=n(93236),E=n(48063),K={icon:function(l,i){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:l}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:i}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:l}}]}},name:"check-circle",theme:"twotone"},X=K,P=n(38782),Y=function(l,i){return a.createElement(P.Z,(0,E.Z)({},l,{ref:i,icon:X}))},z=a.forwardRef(Y),J=n(69838),Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"},W=Q,k=function(l,i){return a.createElement(P.Z,(0,E.Z)({},l,{ref:i,icon:W}))},b=a.forwardRef(k),q=n(22717),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},ee=_,ne=function(l,i){return a.createElement(P.Z,(0,E.Z)({},l,{ref:i,icon:ee}))},N=a.forwardRef(ne),te=n(61020),f=n(37090),re=n(77097),se=n(98365),ae=n(49015),e=n(62086),le=function(){var l=(0,a.useState)(!1),i=g()(l,2),y=i[0],A=i[1],oe=(0,a.useState)([]),M=g()(oe,2),ce=M[0],de=M[1],ue=(0,a.useState)(),U=g()(ue,2),o=U[0],he=U[1],fe=(0,a.useState)(!1),w=g()(fe,2),ve=w[0],R=w[1],S=(0,a.useRef)();function me(r){he(r),A(!0)}(0,a.useEffect)(function(){y&&o!==null&&o!==void 0&&o.id&&(0,f.request)("role/get-list").then(function(r){o&&(0,f.request)("user/roles/".concat(o.id)).then(function(t){r.forEach(function(s){var c=t.find(function(d){return d===s.name});c?s.isInRole=!0:s.isInRole=!1}),de(r)})})},[y,o]);function xe(r){if(!o)return u.ZP.warning("User not found!");(0,f.request)("user/add-to-role",{data:{userId:o.id,roleName:r},method:"POST"}).then(function(t){t.succeeded?u.ZP.success("Succeeded!"):t.errors.forEach(function(s){u.ZP.error(s.description)})})}var je=[{title:"#",valueType:"indexBorder",width:40,align:"center"},{title:"H\u1ECD v\xE0 t\xEAn",dataIndex:"name"},{title:"T\xE0i kho\u1EA3n",dataIndex:"userName"},{title:"Email",render:function(t){return t.email?(0,e.jsxs)(p.Z,{children:[t.emailConfirmed?(0,e.jsx)(z,{twoToneColor:"#008000"}):(0,e.jsx)(z,{twoToneColor:"#ff0000"}),(0,e.jsx)("div",{children:t.email})]}):(0,e.jsx)(a.Fragment,{})}},{title:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",dataIndex:"phoneNumber"},{title:"",valueType:"option",render:function(t,s){return(0,e.jsxs)(p.Z,{children:[(0,e.jsx)(f.Link,{to:"/user/edit/".concat(s.id),children:(0,e.jsx)(h.ZP,{icon:(0,e.jsx)(J.Z,{}),size:"small",type:"primary"})}),(0,e.jsx)(h.ZP,{icon:(0,e.jsx)(b,{}),onClick:function(){return me(s)},size:"small"}),(0,e.jsx)(L.Z,{title:"Are you sure to delete?",okText:"Yes",cancelText:"No",onConfirm:I()(Z()().mark(function c(){var d,T;return Z()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,f.request)("user/delete/".concat(s.id),{method:"POST"});case 2:d=j.sent,d.data&&(u.ZP.success("X\xF3a th\xE0nh c\xF4ng!"),(T=S.current)===null||T===void 0||T.reload());case 4:case"end":return j.stop()}},c)})),children:(0,e.jsx)(h.ZP,{type:"primary",danger:!0,icon:(0,e.jsx)(q.Z,{}),size:"small"})})]})},width:100}],Ze=function(){A(!1)},ge=function(){R(!0)},Ce=function(t){t.isInRole?(0,f.request)("user/remove-from-role/".concat(t.name,"/").concat(o.id),{method:"DELETE"}).then(function(s){s.succeeded?u.ZP.success("succeeded"):s.errors.forEach(function(c){u.ZP.error(c.description)})}):xe(t.name)},Te=[{title:"Name",dataIndex:"name"},{title:"Normalized Name",dataIndex:"normalizedName"},{title:"Is In Role",render:function(t){return(0,e.jsx)(B.Z,{checked:t.isInRole,onClick:function(){return Ce(t)}})}}],pe=function(){var r=I()(Z()().mark(function t(s){var c,d;return Z()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,f.request)("user/create",{method:"POST",data:s});case 2:c=m.sent,c.succeeded&&(R(!1),(d=S.current)===null||d===void 0||d.reload(),u.ZP.success("Th\xEAm th\xE0nh c\xF4ng!"));case 4:case"end":return m.stop()}},t)}));return function(s){return r.apply(this,arguments)}}();return(0,e.jsxs)(re._z,{extra:(0,e.jsx)(h.ZP,{type:"primary",icon:(0,e.jsx)(N,{}),onClick:ge,children:"Th\xEAm th\xE0nh vi\xEAn"}),children:[(0,e.jsx)("div",{className:"bg-white p-4",children:(0,e.jsx)(se.Z,{ghost:!0,search:{layout:"vertical"},actionRef:S,request:ae.Mf,columns:je,rowKey:"id"})}),(0,e.jsxs)($.Z,{title:"Assign Role",open:y,onOk:Ze,onCancel:function(){return A(!1)},children:[(0,e.jsxs)("div",{className:"p-2 flex justify-between",children:[(0,e.jsxs)(p.Z,{children:[(0,e.jsx)(x.Z,{}),(0,e.jsx)(h.ZP,{type:"primary",icon:(0,e.jsx)(te.Z,{})})]}),(0,e.jsx)(h.ZP,{icon:(0,e.jsx)(N,{}),type:"primary",children:"New role"})]}),(0,e.jsx)(F.Z,{columns:Te,rowKey:"id",dataSource:ce})]}),(0,e.jsx)(G.Z,{open:ve,width:700,onClose:function(){return R(!1)},title:"Ng\u01B0\u1EDDi d\xF9ng",children:(0,e.jsxs)(v.Z,{onFinish:pe,layout:"vertical",children:[(0,e.jsx)(v.Z.Item,{name:"name",label:"H\u1ECD v\xE0 t\xEAn",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp h\u1ECD v\xE0 t\xEAn"}],children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(v.Z.Item,{name:"userName",label:"T\xEAn \u0111\u0103ng nh\u1EADp",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp t\xEAn \u0111\u0103ng nh\u1EADp"}],children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(v.Z.Item,{name:"email",label:"Email",children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(v.Z.Item,{name:"passwordHash",label:"M\u1EADt kh\u1EA9u",children:(0,e.jsx)(x.Z.Password,{})}),(0,e.jsx)(v.Z.Item,{children:(0,e.jsx)(h.ZP,{type:"primary",htmlType:"submit",children:"T\u1EA1o th\xE0nh vi\xEAn"})})]})})]})},ie=le}}]);
