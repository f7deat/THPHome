"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2912],{69838:function(K,j,n){n.d(j,{Z:function(){return u}});var S=n(48063),v=n(93236),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},C=O,p=n(38782),f=function(l,y){return v.createElement(p.Z,(0,S.Z)({},l,{ref:y,icon:C}))},u=v.forwardRef(f)},29904:function(K,j,n){n.r(j),n.d(j,{default:function(){return le}});var S=n(90228),v=n.n(S),O=n(87999),C=n.n(O),p=n(48305),f=n.n(p),u=n(68110),m=n(14292),l=n(55641),y=n(53739),$=n(43772),x=n(76477),N=n(68307),X=n(47686),Y=n(29690),Z=n(16941),a=n(93236),P=n(48063),k={icon:function(c,o){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:c}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:o}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:c}}]}},name:"check-circle",theme:"twotone"},J=k,A=n(38782),Q=function(c,o){return a.createElement(A.Z,(0,P.Z)({},c,{ref:o,icon:J}))},L=a.forwardRef(Q),W=n(69838),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"},q=b,_=function(c,o){return a.createElement(A.Z,(0,P.Z)({},c,{ref:o,icon:q}))},ee=a.forwardRef(_),ne=n(22717),M=n(61020),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},se=te,re=function(c,o){return a.createElement(A.Z,(0,P.Z)({},c,{ref:o,icon:se}))},w=a.forwardRef(re),h=n(37090),ae=n(77097),e=n(62086),ie=function(){var c=(0,a.useState)([]),o=f()(c,2),ce=o[0],V=o[1],oe=(0,a.useState)(!1),D=f()(oe,2),ue=D[0],R=D[1],de=(0,a.useState)([]),B=f()(de,2),fe=B[0],he=B[1],ve=(0,a.useState)(),H=f()(ve,2),g=H[0],me=H[1],xe=(0,a.useState)(!1),F=f()(xe,2),Ze=F[0],I=F[1],ge=(0,a.useState)(""),G=f()(ge,2),je=G[0],Ce=G[1],E=function(){(0,h.request)("user/list",{params:{searchTerm:je}}).then(function(t){t.status===401?V([]):V(t)})};(0,a.useEffect)(function(){E()},[]);function Te(s){me(s),z()}function z(){(0,h.request)("role/get-list").then(function(s){g&&(0,h.request)("user/roles/".concat(g.id)).then(function(t){s.map(function(r){var d=t.find(function(U){return U===r.name});d?r.isInRole=!0:r.isInRole=!1}),he(s),R(!0)})})}function Ee(s){if(!g)return u.ZP.warning("User not found!");(0,h.request)("user/add-to-role",{userId:g.id,roleName:s}).then(function(t){t.succeeded?(u.ZP.success("Succeeded!"),z()):t.errors.forEach(function(r){u.ZP.error(r.description)})})}var Se=[{title:"Name",dataIndex:"name"},{title:"User name",dataIndex:"userName"},{title:"Email",render:function(t){return(0,e.jsxs)(m.Z,{children:[t.emailConfirmed?(0,e.jsx)(L,{twoToneColor:"#008000"}):(0,e.jsx)(L,{twoToneColor:"#ff0000"}),(0,e.jsx)("div",{children:t.email})]})}},{title:"",render:function(t){return(0,e.jsxs)(m.Z,{children:[(0,e.jsx)(h.Link,{to:"/users/edit/".concat(t.id),children:(0,e.jsx)(l.ZP,{icon:(0,e.jsx)(W.Z,{})})}),(0,e.jsx)(l.ZP,{icon:(0,e.jsx)(ee,{}),onClick:function(){return Te(t)}}),(0,e.jsx)(y.Z,{title:"Are you sure to delete?",okText:"Yes",cancelText:"No",onConfirm:C()(v()().mark(function r(){var d;return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,h.request)("user/delete/".concat(t.id),{method:"POST"});case 2:d=i.sent,d.data&&(u.ZP.success("X\xF3a th\xE0nh c\xF4ng!"),E());case 4:case"end":return i.stop()}},r)})),children:(0,e.jsx)(l.ZP,{type:"primary",danger:!0,icon:(0,e.jsx)(ne.Z,{})})})]})}}],Oe=function(){R(!1)},pe=function(){I(!0)},ye=function(t){t.isInRole?(0,h.request)("user/remove-from-role/".concat(t.name,"/").concat(g.id),{method:"DELETE"}).then(function(r){r.succeeded?(u.ZP.success("succeeded"),z()):r.errors.forEach(function(d){u.ZP.error(d.description)})}):Ee(t.name)},Pe=[{title:"Name",dataIndex:"name"},{title:"Normalized Name",dataIndex:"normalizedName"},{title:"Is In Role",render:function(t){return(0,e.jsx)($.Z,{checked:t.isInRole,onClick:function(){return ye(t)}})}}],Ae=function(){var s=C()(v()().mark(function t(r){var d;return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,h.request)("user/create",{method:"POST",data:r});case 2:d=i.sent,d.data.succeeded&&(I(!1),E(),u.ZP.success("Th\xEAm th\xE0nh c\xF4ng!"));case 4:case"end":return i.stop()}},t)}));return function(r){return s.apply(this,arguments)}}();return(0,e.jsxs)(ae._z,{children:[(0,e.jsxs)("div",{className:"bg-white p-4",children:[(0,e.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,e.jsxs)(m.Z,{children:[(0,e.jsx)(x.Z,{onChange:function(t){return Ce(t.currentTarget.value)}}),(0,e.jsx)(l.ZP,{icon:(0,e.jsx)(M.Z,{}),type:"primary",onClick:function(){return E()},children:"T\xECm ki\u1EBFm"})]}),(0,e.jsx)(l.ZP,{type:"primary",icon:(0,e.jsx)(w,{}),onClick:pe,children:"Th\xEAm th\xE0nh vi\xEAn"})]}),(0,e.jsx)(N.Z,{dataSource:ce,columns:Se,rowKey:"id"})]}),(0,e.jsxs)(X.Z,{title:"Assign Role",visible:ue,onOk:Oe,onCancel:function(){return R(!1)},bodyStyle:{padding:0},children:[(0,e.jsxs)("div",{className:"p-2 flex justify-between",children:[(0,e.jsxs)(m.Z,{children:[(0,e.jsx)(x.Z,{}),(0,e.jsx)(l.ZP,{type:"primary",icon:(0,e.jsx)(M.Z,{})})]}),(0,e.jsx)(l.ZP,{icon:(0,e.jsx)(w,{}),type:"primary",children:"New role"})]}),(0,e.jsx)(N.Z,{columns:Pe,rowKey:"id",dataSource:fe})]}),(0,e.jsx)(Y.Z,{visible:Ze,width:700,onClose:function(){return I(!1)},title:"Ng\u01B0\u1EDDi d\xF9ng",children:(0,e.jsxs)(Z.Z,{onFinish:Ae,layout:"vertical",children:[(0,e.jsx)(Z.Z.Item,{name:"name",label:"H\u1ECD v\xE0 t\xEAn",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp h\u1ECD v\xE0 t\xEAn"}],children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(Z.Z.Item,{name:"userName",label:"T\xEAn \u0111\u0103ng nh\u1EADp",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp t\xEAn \u0111\u0103ng nh\u1EADp"}],children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(Z.Z.Item,{name:"email",label:"Email",children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(Z.Z.Item,{children:(0,e.jsx)(l.ZP,{type:"primary",htmlType:"submit",children:"T\u1EA1o th\xE0nh vi\xEAn"})})]})})]})},le=ie}}]);
