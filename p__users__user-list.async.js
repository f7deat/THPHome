"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2912],{13884:function(Oe,A,t){t.r(A),t.d(A,{default:function(){return ie}});var D=t(53939),x=t.n(D),w=t(83134),O=t.n(w),B=t(34827),f=t.n(B),d=t(46665),C=t(41605),h=t(15621),H=t(30339),F=t(28791),G=t(18186),g=t(10483),K=t(26299),$=t(78491),m=t(4870),a=t(68136),Z=t(52643),X={icon:function(i,c){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:i}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:c}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:i}}]}},name:"check-circle",theme:"twotone"},Y=X,T=t(91471),J=function(i,c){return a.createElement(T.Z,(0,Z.Z)({},i,{ref:c,icon:Y}))},R=a.forwardRef(J),Q=t(49799),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"},k=W,b=function(i,c){return a.createElement(T.Z,(0,Z.Z)({},i,{ref:c,icon:k}))},q=a.forwardRef(b),_=t(25223),ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},te=ee,ne=function(i,c){return a.createElement(T.Z,(0,Z.Z)({},i,{ref:c,icon:te}))},z=a.forwardRef(ne),se=t(54619),u=t(58703),re=t(81068),ae=t(59743),e=t(33130),le=function(){var i=(0,a.useState)([]),c=f()(i,2),ce=c[0],I=c[1],oe=(0,a.useState)(!1),U=f()(oe,2),ue=U[0],p=U[1],de=(0,a.useState)([]),N=f()(de,2),he=N[0],fe=N[1],me=(0,a.useState)(),M=f()(me,2),v=M[0],ve=M[1],xe=(0,a.useState)(!1),L=f()(xe,2),ge=L[0],S=L[1],je=(0,a.useState)(""),V=f()(je,2),Ce=V[0],Re=V[1],y=function(){(0,u.request)("user/list",{params:{searchTerm:Ce}}).then(function(n){n.status===401?I([]):I(n)})};(0,a.useEffect)(function(){y()},[]);function Ze(s){ve(s),E()}function E(){(0,u.request)("role/get-list").then(function(s){v&&(0,u.request)("user/roles/".concat(v.id)).then(function(n){s.map(function(r){var o=n.find(function(P){return P===r.name});o?r.isInRole=!0:r.isInRole=!1}),fe(s),p(!0)})})}function Te(s){if(!v)return d.ZP.warning("User not found!");(0,u.request)("user/add-to-role",{userId:v.id,roleName:s}).then(function(n){n.succeeded?(d.ZP.success("Succeeded!"),E()):n.errors.forEach(function(r){d.ZP.error(r.description)})})}var pe=[{title:"#",valueType:"indexBorder"},{title:"Name",dataIndex:"name"},{title:"User name",dataIndex:"userName"},{title:"Email",render:function(n){return n.email?(0,e.jsxs)(C.Z,{children:[n.emailConfirmed?(0,e.jsx)(R,{twoToneColor:"#008000"}):(0,e.jsx)(R,{twoToneColor:"#ff0000"}),(0,e.jsx)("div",{children:n.email})]}):(0,e.jsx)(a.Fragment,{})}},{title:"",valueType:"option",render:function(n){return(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(u.Link,{to:"/users/edit/".concat(n.id),children:(0,e.jsx)(h.ZP,{icon:(0,e.jsx)(Q.Z,{}),size:"small",type:"primary"})}),(0,e.jsx)(h.ZP,{icon:(0,e.jsx)(q,{}),onClick:function(){return Ze(n)},size:"small"}),(0,e.jsx)(H.Z,{title:"Are you sure to delete?",okText:"Yes",cancelText:"No",onConfirm:O()(x()().mark(function r(){var o;return x()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,u.request)("user/delete/".concat(n.id),{method:"POST"});case 2:o=l.sent,o.data&&(d.ZP.success("X\xF3a th\xE0nh c\xF4ng!"),y());case 4:case"end":return l.stop()}},r)})),children:(0,e.jsx)(h.ZP,{type:"primary",danger:!0,icon:(0,e.jsx)(_.Z,{}),size:"small"})})]})}}],Se=function(){p(!1)},ye=function(){S(!0)},Ee=function(n){n.isInRole?(0,u.request)("user/remove-from-role/".concat(n.name,"/").concat(v.id),{method:"DELETE"}).then(function(r){r.succeeded?(d.ZP.success("succeeded"),E()):r.errors.forEach(function(o){d.ZP.error(o.description)})}):Te(n.name)},Pe=[{title:"Name",dataIndex:"name"},{title:"Normalized Name",dataIndex:"normalizedName"},{title:"Is In Role",render:function(n){return(0,e.jsx)(F.Z,{checked:n.isInRole,onClick:function(){return Ee(n)}})}}],Ae=function(){var s=O()(x()().mark(function n(r){var o;return x()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,u.request)("user/create",{method:"POST",data:r});case 2:o=l.sent,o.data.succeeded&&(S(!1),y(),d.ZP.success("Th\xEAm th\xE0nh c\xF4ng!"));case 4:case"end":return l.stop()}},n)}));return function(r){return s.apply(this,arguments)}}();return(0,e.jsxs)(re._z,{extra:(0,e.jsx)(h.ZP,{type:"primary",icon:(0,e.jsx)(z,{}),onClick:ye,children:"Th\xEAm th\xE0nh vi\xEAn"}),children:[(0,e.jsx)("div",{className:"bg-white p-4",children:(0,e.jsx)(ae.Z,{search:{layout:"vertical"},dataSource:ce,columns:pe,rowKey:"id"})}),(0,e.jsxs)(G.Z,{title:"Assign Role",open:ue,onOk:Se,onCancel:function(){return p(!1)},bodyStyle:{padding:0},children:[(0,e.jsxs)("div",{className:"p-2 flex justify-between",children:[(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(g.Z,{}),(0,e.jsx)(h.ZP,{type:"primary",icon:(0,e.jsx)(se.Z,{})})]}),(0,e.jsx)(h.ZP,{icon:(0,e.jsx)(z,{}),type:"primary",children:"New role"})]}),(0,e.jsx)(K.Z,{columns:Pe,rowKey:"id",dataSource:he})]}),(0,e.jsx)($.Z,{open:ge,width:700,onClose:function(){return S(!1)},title:"Ng\u01B0\u1EDDi d\xF9ng",children:(0,e.jsxs)(m.Z,{onFinish:Ae,layout:"vertical",children:[(0,e.jsx)(m.Z.Item,{name:"name",label:"H\u1ECD v\xE0 t\xEAn",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp h\u1ECD v\xE0 t\xEAn"}],children:(0,e.jsx)(g.Z,{})}),(0,e.jsx)(m.Z.Item,{name:"userName",label:"T\xEAn \u0111\u0103ng nh\u1EADp",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp t\xEAn \u0111\u0103ng nh\u1EADp"}],children:(0,e.jsx)(g.Z,{})}),(0,e.jsx)(m.Z.Item,{name:"email",label:"Email",children:(0,e.jsx)(g.Z,{})}),(0,e.jsx)(m.Z.Item,{children:(0,e.jsx)(h.ZP,{type:"primary",htmlType:"submit",children:"T\u1EA1o th\xE0nh vi\xEAn"})})]})})]})},ie=le}}]);
