"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1658],{8019:function(Z,v,e){var f=e(90228),d=e.n(f),o=e(87999),l=e.n(o),T=e(68110),g=e(93236),D=e(81384),O=e(37090),p=e(54885),r=e(62086),L=function(m){var h=p.A.useFormInstance(),M=(0,g.useRef)(null),W=function(){if(M.current){var c;h.setFieldValue(m.name,(c=M.current)===null||c===void 0?void 0:c.getContent())}};return(0,g.useEffect)(function(){!m.initialValue&&M.current&&M.current.setContent("")},[m.initialValue]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(p.A.Item,{hidden:!0,name:m.name}),(0,r.jsx)("div",{className:"mb-2",children:m.label}),(0,r.jsx)(D.M,{onChange:W,onInit:function(c,b){M.current=b},apiKey:"mn4nbwhddqp9jr1g1c3w17dkdu96ji7lr2fmolsncez1k3ng",init:{plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",file_picker_types:"file image media",file_picker_callback:function(c,b,I){if(I.filetype==="file"&&c("mypage.html",{text:"My text"}),I.filetype==="image"){var x=document.createElement("input");x.setAttribute("type","file"),x.setAttribute("accept","image/*"),x.addEventListener("change",function(){var F=l()(d()().mark(function K(N){var y,E,j;return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return y=N.target.files[0],E=new FormData,E.append("file",y),s.next=5,(0,O.request)("file/image/upload",{data:E,method:"POST"});case 5:j=s.sent,j&&(T.ZP.success("T\u1EA3i l\xEAn th\xE0nh c\xF4ng!"),c(j.url,{alt:"My alt text"}));case 7:case"end":return s.stop()}},K)}));return function(K){return F.apply(this,arguments)}}()),x.click()}I.filetype==="media"&&c("movie.mp4",{source2:"alt.ogg",poster:"image.jpg"})}},initialValue:m.initialValue})]})})};v.Z=L},96668:function(Z,v,e){e.d(v,{W:function(){return d},h:function(){return f}});var f=function(o){return o[o.DEFAULT=0]="DEFAULT",o[o.PAGE=1]="PAGE",o[o.NEWS=2]="NEWS",o[o.NOTIFICATION=3]="NOTIFICATION",o}({}),d=[{value:f.PAGE,label:"Trang"},{value:f.NEWS,label:"Tin t\u1EE9c"},{value:f.NOTIFICATION,label:"Th\xF4ng b\xE1o"}]},3632:function(Z,v,e){e.r(v);var f=e(26068),d=e.n(f),o=e(90228),l=e.n(o),T=e(15558),g=e.n(T),D=e(87999),O=e.n(D),p=e(48305),r=e.n(p),L=e(59764),R=e(95845),m=e(16941),h=e(68110),M=e(98659),W=e(69534),C=e(97146),c=e(76477),b=e(55641),I=e(19991),x=e(58925),F=e(62),K=e(56154),N=e(38444),y=e(23318),E=e(93236),j=e(96668),$=e(8019),s=e(37090),re=e(5726),ie=e.n(re),oe=e(77097),J=e(42389),n=e(62086),ue=L.Z.Dragger,de=function(){var me=R.Z.Option,ce=m.Z.useForm(),Ee=r()(ce,1),S=Ee[0],he=(0,s.useParams)(),A=he.id,fe=(0,E.useState)({}),Q=r()(fe,2),i=Q[0],H=Q[1],Pe=(0,E.useState)(),X=r()(Pe,2),G=X[0],ve=X[1],pe=(0,E.useState)([]),w=r()(pe,2),V=w[0],k=w[1],ge=(0,E.useState)([]),q=r()(ge,2),B=q[0],z=q[1],De=(0,E.useState)(),ee=r()(De,2),Oe=ee[0],Y=ee[1],Me=(0,E.useState)(""),ne=r()(Me,2),te=ne[0],ae=ne[1],_e=(0,s.useIntl)(),se=(0,E.useCallback)(function(){A&&((0,s.request)("post/get/".concat(A)).then(function(a){H(a),S.setFields([{name:"content",value:a.content},{name:"title",value:a.title},{name:"type",value:a.type},{name:"thumbnail",value:a.thumbnail},{name:"language",value:a.language}]),ae(a.thumbnail)}),(0,s.request)("post/get-list-category-id-in-post/".concat(A)).then(function(a){k(a)}),(0,s.request)("post/attachment-list-in-post/".concat(A)).then(function(a){var _=a.map(function(t){return{uid:t.id,name:t.name,status:"done",url:"/files/".concat(t.id).concat(t.extension)}});z(_)}))},[A]);(0,E.useEffect)(function(){se(),(0,s.request)("category/get-list?language=".concat((0,J.dK)(_e.locale))).then(function(a){ve(a)})},[se]);var Ce=function(){var _=B.map(function(t){return{id:t.uid}});(0,s.request)("post/add",{method:"POST",data:{post:i,listCategoryId:V,attachments:_}}).then(function(t){t.succeeded?h.ZP.success("L\u01B0u th\xE0nh c\xF4ng!"):h.ZP.error("ERROR"),Y(!1)})},Te=function(){var _=B.map(function(t){return{id:t.uid}});(0,s.request)("post/update",{method:"POST",data:{post:i,listCategoryId:V,attachments:_}}).then(function(t){t.succeeded?h.ZP.success("L\u01B0u th\xE0nh c\xF4ng!"):h.ZP.error("ERROR"),Y(!1)})};function xe(a){k(a)}var je=function(_){(0,s.request)("post/file/delete/".concat(_.uid),{method:"DELETE"}).then(function(t){t.succeeded?z(B.filter(function(P){return P.uid!==_.uid})):h.ZP.error(t.message)})},Ae=function(){var a=O()(l()().mark(function _(t){var P,u,le;return l()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return P=new FormData,P.append("file",t),U.next=4,(0,s.request)("post/upload",{method:"POST",data:P});case 4:u=U.sent,le={uid:u.attach.id,name:u.attach.name,status:"done",url:"/files/".concat(u.attach.id).concat(u.attach.extension)},z([].concat(g()(B),[le])),h.ZP.success("".concat(t.name," file uploaded successfully."));case 8:case"end":return U.stop()}},_)}));return function(t){return a.apply(this,arguments)}}(),be={name:"file",multiple:!1,beforeUpload:Ae,fileList:B,onRemove:je},Ie=function(){var a=O()(l()().mark(function _(t){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t.type=Number(t.type),i.content=t.content,i.type=t.type,i.title=t.title,i.thumbnail=t.thumbnail,i.language=(0,J.dK)(_e.locale),Y(!0),A?Te():Ce();case 8:case"end":return u.stop()}},_)}));return function(t){return a.apply(this,arguments)}}();return(0,n.jsx)(oe._z,{children:(0,n.jsx)(M.Z,{children:(0,n.jsx)(m.Z,{onFinish:Ie,layout:"vertical",form:S,children:(0,n.jsxs)(W.Z,{gutter:16,children:[(0,n.jsxs)(C.Z,{span:18,children:[(0,n.jsx)(m.Z.Item,{name:"title",label:"Ti\xEAu \u0111\u1EC1",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp ti\xEAu \u0111\u1EC1 b\xE0i vi\u1EBFt"}],children:(0,n.jsx)(c.Z,{})}),(0,n.jsx)("div",{className:"mb-1",children:"M\xF4 t\u1EA3"}),(0,n.jsx)(c.Z.TextArea,{value:i.description,onChange:function(_){return H(d()(d()({},i),{},{description:_.target.value}))},className:"mb-2"}),(0,n.jsx)($.Z,{name:"content",label:"N\u1ED9i dung",initialValue:i==null?void 0:i.content}),(0,n.jsx)(b.ZP,{type:"primary",htmlType:"submit",loading:Oe,icon:(0,n.jsx)(K.Z,{}),children:"L\u01B0u l\u1EA1i"})]}),(0,n.jsxs)(C.Z,{span:6,children:[(0,n.jsxs)(W.Z,{gutter:16,children:[(0,n.jsx)(C.Z,{span:12,children:(0,n.jsx)(m.Z.Item,{label:"Lo\u1EA1i",name:"type",initialValue:j.h.NEWS,rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn lo\u1EA1i b\xE0i vi\u1EBFt"}],children:(0,n.jsx)(R.Z,{options:j.W})})}),(0,n.jsx)(C.Z,{span:12,children:(0,n.jsx)(m.Z.Item,{label:"Ng\xF4n ng\u1EEF",tooltip:"Chuy\u1EC3n ng\xF4n ng\u1EEF tr\xEAn thanh c\xF4ng c\u1EE5",children:(0,n.jsx)(c.Z,{disabled:!0,value:(0,s.getLocale)()})})})]}),(0,n.jsx)("div",{className:"mb-1",children:"Danh m\u1EE5c"}),(0,n.jsx)(R.Z,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Vui l\xF2ng ch\u1ECDn",onChange:xe,className:"mb-2",value:V,optionFilterProp:"children",filterOption:function(_,t){return t.children.toLowerCase().indexOf(_.toLowerCase())>=0},children:G==null?void 0:G.map(function(a){return(0,n.jsx)(me,{value:a.id,children:a.name},a.id)})}),(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)(m.Z.Item,{label:"\u1EA2nh \u0111\u1EA1i di\u1EC7n",name:"thumbnail",style:{width:"100%"},children:(0,n.jsx)(c.Z,{suffix:(0,n.jsx)(L.Z,{beforeUpload:function(_){var t=_.type==="image/jpeg"||_.type==="image/png";if(t){var P=new FormData;return P.append("file",_),(0,s.request)("file/image/upload",{method:"POST",data:P}).then(function(u){if(!u.succeeded)return h.ZP.error(u.message),!1;S.setFieldValue("thumbnail",u.url),ae(u.url)}),!1}else return h.ZP.error("You can only upload JPG or PNG file!"),!1},maxCount:1,showUploadList:!1,children:(0,n.jsx)(b.ZP,{icon:(0,n.jsx)(N.Z,{}),size:"small",children:"T\u1EA3i l\xEAn"})})})})}),(0,n.jsx)("div",{className:"mb-4",children:te?(0,n.jsx)(I.Z,{src:te,height:180,wrapperClassName:"w-full h-40",style:{width:"100%",objectFit:"cover"}}):(0,n.jsx)("div",{className:"h-40 border flex items-center justify-center",children:(0,n.jsx)(x.Z,{})})}),(0,n.jsx)("div",{className:"mb-1",children:"Ng\xE0y xu\u1EA5t b\u1EA3n"}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(F.default,{onChange:function(_){return H(d()(d()({},i),{},{modifiedDate:_==null?void 0:_.toDate()}))},value:ie()(i==null?void 0:i.modifiedDate),className:"w-full"})}),(0,n.jsx)("div",{className:"mb-1",children:"T\u1EC7p tin \u0111\xEDnh k\xE8m"}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsxs)(ue,d()(d()({},be),{},{children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(y.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Ch\u1ECDn t\u1EC7p tin \u0111\xEDnh k\xE8m"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"H\u1ED7 tr\u1EE3 c\xE1c \u0111\u1ECBnh d\u1EA1ng th\xF4ng d\u1EE5ng .docx, .xlsx, .pdf"})]}))})]})]})})})})};v.default=de},42389:function(Z,v,e){e.d(v,{dK:function(){return d},gB:function(){return o}});function f(l){return l.trim()}function d(l){return l?l==="vi-VN"?1:2:1}function o(l){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,D=T?1e3:1024;if(Math.abs(l)<D)return l+" B";var O=T?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],p=-1,r=Math.pow(10,g);do l/=D,++p;while(Math.round(Math.abs(l)*r)/r>=D&&p<O.length-1);return l.toFixed(g)+" "+O[p]}}}]);
