"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1658],{8019:function(_,Z,e){var M=e(90228),h=e.n(M),I=e(87999),s=e.n(I),O=e(68110),x=e(93236),j=e(81384),y=e(37090),g=e(54885),r=e(62086),S=function(d){var E=g.A.useFormInstance(),C=(0,x.useRef)(null),L=function(){if(C.current){var c;E.setFieldValue(d.name,(c=C.current)===null||c===void 0?void 0:c.getContent())}};return(0,x.useEffect)(function(){!d.initialValue&&C.current&&C.current.setContent("")},[d.initialValue]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(g.A.Item,{hidden:!0,name:d.name}),(0,r.jsx)("div",{className:"mb-2",children:d.label}),(0,r.jsx)(j.M,{onChange:L,onInit:function(c,R){C.current=R},apiKey:"mn4nbwhddqp9jr1g1c3w17dkdu96ji7lr2fmolsncez1k3ng",init:{plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",file_picker_types:"file image media",file_picker_callback:function(c,R,D){if(D.filetype==="file"&&c("mypage.html",{text:"My text"}),D.filetype==="image"){var T=document.createElement("input");T.setAttribute("type","file"),T.setAttribute("accept","image/*"),T.addEventListener("change",function(){var V=s()(h()().mark(function U(H){var K,m,p;return h()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return K=H.target.files[0],m=new FormData,m.append("file",K),A.next=5,(0,y.request)("file/image/upload",{data:m,method:"POST"});case 5:p=A.sent,p&&(O.ZP.success("T\u1EA3i l\xEAn th\xE0nh c\xF4ng!"),c(p.url,{alt:"My alt text"}));case 7:case"end":return A.stop()}},U)}));return function(U){return V.apply(this,arguments)}}()),T.click()}D.filetype==="media"&&c("movie.mp4",{source2:"alt.ogg",poster:"image.jpg"})}},initialValue:d.initialValue})]})})};Z.Z=S},35782:function(_,Z,e){e.r(Z),e.d(Z,{default:function(){return fe}});var M=e(26068),h=e.n(M),I=e(90228),s=e.n(I),O=e(15558),x=e.n(O),j=e(87999),y=e.n(j),g=e(48305),r=e.n(g),S=e(59764),B=e(95845),d=e(16941),E=e(68110),C=e(98659),L=e(69534),P=e(97146),c=e(76477),R=e(14292),D=e(55641),T=e(19991),V=e(58925),U=e(62),H=e(38444),K=e(23318),m=e(93236),p=function(f){return f[f.DEFAULT=0]="DEFAULT",f[f.PAGE=1]="PAGE",f[f.NEWS=2]="NEWS",f[f.NOTIFICATION=3]="NOTIFICATION",f}({}),w=[{value:p.PAGE,label:"Trang"},{value:p.NEWS,label:"Tin t\u1EE9c"},{value:p.NOTIFICATION,label:"Th\xF4ng b\xE1o"}],A=e(8019),u=e(37090),oe=e(5726),de=e.n(oe),ce=e(77097),W=e(42389),t=e(62086),me=S.Z.Dragger,he=function(){var ve=B.Z.Option,ge=d.Z.useForm(),Ee=r()(ge,1),z=Ee[0],pe=(0,u.useParams)(),F=pe.id,xe=(0,m.useState)({}),k=r()(xe,2),l=k[0],Y=k[1],je=(0,m.useState)(),q=r()(je,2),$=q[0],ye=q[1],Ce=(0,m.useState)([]),ee=r()(Ce,2),J=ee[0],te=ee[1],Pe=(0,m.useState)([]),ne=r()(Pe,2),N=ne[0],Q=ne[1],De=(0,m.useState)(),ae=r()(De,2),Ae=ae[0],X=ae[1],Ze=(0,m.useState)(""),ie=r()(Ze,2),le=ie[0],se=ie[1],G=(0,u.useIntl)(),re=(0,m.useCallback)(function(){F&&((0,u.request)("post/get/".concat(F)).then(function(n){Y(n),z.setFields([{name:"content",value:n.content},{name:"title",value:n.title},{name:"type",value:n.type},{name:"thumbnail",value:n.thumbnail},{name:"language",value:n.language}]),se(n.thumbnail)}),(0,u.request)("post/get-list-category-id-in-post/".concat(F)).then(function(n){te(n)}),(0,u.request)("post/attachment-list-in-post/".concat(F)).then(function(n){var i=n.map(function(a){return{uid:a.id,name:a.name,status:"done",url:"/files/".concat(a.id).concat(a.extension)}});Q(i)}))},[F]);(0,m.useEffect)(function(){re(),(0,u.request)("category/get-list?language=".concat((0,W.dK)(G.locale))).then(function(n){ye(n)})},[re]);var Oe=function(){var i=N.map(function(a){return{id:a.uid}});(0,u.request)("post/add",{method:"POST",data:{post:l,listCategoryId:J,attachments:i}}).then(function(a){a.succeeded?u.history.push("/post/list?type=".concat(l.type,"&language=").concat((0,W.dK)(G.locale))):E.ZP.error("ERROR"),X(!1)})},Te=function(){var i=N.map(function(a){return{id:a.uid}});(0,u.request)("post/update",{method:"POST",data:{post:l,listCategoryId:J,attachments:i}}).then(function(a){a.succeeded?u.history.push("/post/list?type=".concat(l.type,"&language=").concat((0,W.dK)(G.locale))):E.ZP.error("ERROR"),X(!1)})};function Fe(n){te(n)}var Ie=function(i){(0,u.request)("post/file/delete/".concat(i.uid),{method:"DELETE"}).then(function(a){a.succeeded?Q(N.filter(function(v){return v.uid!==i.uid})):E.ZP.error(a.message)})},Ne=function(){var n=y()(s()().mark(function i(a){var v,o,ue;return s()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return v=new FormData,v.append("file",a),b.next=4,(0,u.request)("post/upload",{method:"POST",data:v});case 4:o=b.sent,ue={uid:o.attach.id,name:o.attach.name,status:"done",url:"/files/".concat(o.attach.id).concat(o.attach.extension)},Q([].concat(x()(N),[ue])),E.ZP.success("".concat(a.name," file uploaded successfully."));case 8:case"end":return b.stop()}},i)}));return function(a){return n.apply(this,arguments)}}(),be={name:"file",multiple:!1,beforeUpload:Ne,fileList:N,onRemove:Ie},Me=function(){var n=y()(s()().mark(function i(a){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:a.type=Number(a.type),l.content=a.content,l.type=a.type,l.title=a.title,l.thumbnail=a.thumbnail,l.language=(0,W.dK)(G.locale),X(!0),F?Te():Oe();case 8:case"end":return o.stop()}},i)}));return function(a){return n.apply(this,arguments)}}();return(0,t.jsx)(ce._z,{children:(0,t.jsx)(C.Z,{children:(0,t.jsx)(d.Z,{onFinish:Me,layout:"vertical",form:z,children:(0,t.jsxs)(L.Z,{gutter:16,children:[(0,t.jsxs)(P.Z,{span:18,children:[(0,t.jsx)(d.Z.Item,{name:"title",label:"Ti\xEAu \u0111\u1EC1",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp ti\xEAu \u0111\u1EC1 b\xE0i vi\u1EBFt"}],children:(0,t.jsx)(c.Z,{})}),(0,t.jsx)("div",{className:"mb-1",children:"M\xF4 t\u1EA3"}),(0,t.jsx)(c.Z.TextArea,{value:l.description,onChange:function(i){return Y(h()(h()({},l),{},{description:i.target.value}))},className:"mb-2"}),(0,t.jsx)(A.Z,{name:"content",label:"N\u1ED9i dung",initialValue:l==null?void 0:l.content}),(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(D.ZP,{type:"primary",htmlType:"submit",loading:Ae,children:"L\u01B0u l\u1EA1i"}),(0,t.jsx)(D.ZP,{onClick:function(){return u.history.push("/admin/post/list")},children:"H\u1EE7y"})]})]}),(0,t.jsxs)(P.Z,{span:6,children:[(0,t.jsxs)(L.Z,{gutter:16,children:[(0,t.jsx)(P.Z,{span:12,children:(0,t.jsx)(d.Z.Item,{label:"Lo\u1EA1i",name:"type",initialValue:p.NEWS,rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn lo\u1EA1i b\xE0i vi\u1EBFt"}],children:(0,t.jsx)(B.Z,{options:w})})}),(0,t.jsx)(P.Z,{span:12,children:(0,t.jsx)(d.Z.Item,{label:"Ng\xF4n ng\u1EEF",tooltip:"Chuy\u1EC3n ng\xF4n ng\u1EEF tr\xEAn thanh c\xF4ng c\u1EE5",children:(0,t.jsx)(c.Z,{disabled:!0,value:(0,u.getLocale)()})})})]}),(0,t.jsx)("div",{className:"mb-1",children:"Danh m\u1EE5c"}),(0,t.jsx)(B.Z,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Vui l\xF2ng ch\u1ECDn",onChange:Fe,className:"mb-2",value:J,optionFilterProp:"children",filterOption:function(i,a){return a.children.toLowerCase().indexOf(i.toLowerCase())>=0},children:$==null?void 0:$.map(function(n){return(0,t.jsx)(ve,{value:n.id,children:n.name},n.id)})}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(d.Z.Item,{label:"\u1EA2nh \u0111\u1EA1i di\u1EC7n",name:"thumbnail",style:{width:"100%"},children:(0,t.jsx)(c.Z,{suffix:(0,t.jsx)(S.Z,{beforeUpload:function(i){var a=i.type==="image/jpeg"||i.type==="image/png";if(a){var v=new FormData;return v.append("file",i),(0,u.request)("file/image/upload",{method:"POST",data:v}).then(function(o){if(!o.succeeded)return E.ZP.error(o.message),!1;z.setFieldValue("thumbnail",o.url),se(o.url)}),!1}else return E.ZP.error("You can only upload JPG or PNG file!"),!1},maxCount:1,showUploadList:!1,children:(0,t.jsx)(D.ZP,{icon:(0,t.jsx)(H.Z,{}),size:"small",children:"T\u1EA3i l\xEAn"})})})})}),(0,t.jsx)("div",{className:"mb-4",children:le?(0,t.jsx)(T.Z,{src:le,height:180,wrapperClassName:"w-full h-40",style:{width:"100%",objectFit:"cover"}}):(0,t.jsx)("div",{className:"h-40 border flex items-center justify-center",children:(0,t.jsx)(V.Z,{})})}),(0,t.jsx)("div",{className:"mb-1",children:"Ng\xE0y xu\u1EA5t b\u1EA3n"}),(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)(U.default,{onChange:function(i){return Y(h()(h()({},l),{},{modifiedDate:i==null?void 0:i.toDate()}))},value:de()(l==null?void 0:l.modifiedDate)})}),(0,t.jsx)("div",{className:"mb-1",children:"T\u1EC7p tin \u0111\xEDnh k\xE8m"}),(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsxs)(me,h()(h()({},be),{},{children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(K.Z,{})}),(0,t.jsx)("p",{className:"ant-upload-text",children:"Ch\u1ECDn t\u1EC7p tin \u0111\xEDnh k\xE8m"}),(0,t.jsx)("p",{className:"ant-upload-hint",children:"H\u1ED7 tr\u1EE3 c\xE1c \u0111\u1ECBnh d\u1EA1ng th\xF4ng d\u1EE5ng .docx, .xlsx, .pdf"})]}))})]})]})})})})},fe=he},42389:function(_,Z,e){e.d(Z,{dK:function(){return h},gB:function(){return I}});function M(s){return s.trim()}function h(s){return s?s==="vi-VN"?1:2:1}function I(s){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=O?1e3:1024;if(Math.abs(s)<j)return s+" B";var y=O?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],g=-1,r=Math.pow(10,x);do s/=j,++g;while(Math.round(Math.abs(s)*r)/r>=j&&g<y.length-1);return s.toFixed(x)+" "+y[g]}}}]);
