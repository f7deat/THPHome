"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1658],{86444:function(_,D,e){var N=e(53939),c=e.n(N),F=e(83134),l=e.n(F),Z=e(4870),O=e(46665),E=e(68136),x=e(44949),j=e(58703),u=e(33130),B=function(h){var v=Z.Z.useFormInstance(),I=(0,E.useRef)(null),L=function(){if(I.current){var d;v.setFieldValue(h.name,(d=I.current)===null||d===void 0?void 0:d.getContent())}};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(x.M,{onChange:L,onInit:function(d,R){return I.current=R},apiKey:"mn4nbwhddqp9jr1g1c3w17dkdu96ji7lr2fmolsncez1k3ng",init:{plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",file_picker_types:"file image media",file_picker_callback:function(d,R,P){if(P.filetype=="file"&&d("mypage.html",{text:"My text"}),P.filetype=="image"){var A=document.createElement("input");A.setAttribute("type","file"),A.setAttribute("accept","image/*"),A.addEventListener("change",function(){var H=l()(c()().mark(function K(V){var U,m,p;return c()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return U=V.target.files[0],m=new FormData,m.append("file",U),C.next=5,(0,j.request)("file/image/upload",{data:m,method:"POST"});case 5:p=C.sent,p&&(O.ZP.success("T\u1EA3i l\xEAn th\xE0nh c\xF4ng!"),d(p.url,{alt:"My alt text"}));case 7:case"end":return C.stop()}},K)}));return function(K){return H.apply(this,arguments)}}()),A.click()}P.filetype=="media"&&d("movie.mp4",{source2:"alt.ogg",poster:"image.jpg"})}},initialValue:v.getFieldValue(h.name)})})};D.Z=B},17433:function(_,D,e){e.r(D),e.d(D,{default:function(){return fe}});var N=e(78095),c=e.n(N),F=e(53939),l=e.n(F),Z=e(60430),O=e.n(Z),E=e(83134),x=e.n(E),j=e(34827),u=e.n(j),B=e(21248),b=e(24991),h=e(4870),v=e(46665),I=e(88094),L=e(13762),y=e(2537),d=e(10483),R=e(41605),P=e(15621),A=e(24657),H=e(62380),K=e(48233),V=e(63687),U=e(83294),m=e(68136),p=function(f){return f[f.DEFAULT=0]="DEFAULT",f[f.PAGE=1]="PAGE",f[f.NEWS=2]="NEWS",f[f.NOTIFICATION=3]="NOTIFICATION",f}({}),w=[{value:p.PAGE,label:"Trang"},{value:p.NEWS,label:"Tin t\u1EE9c"},{value:p.NOTIFICATION,label:"Th\xF4ng b\xE1o"}],C=e(86444),r=e(58703),oe=e(62066),de=e.n(oe),me=e(81068),W=e(26805),t=e(33130),ce=B.Z.Dragger,he=function(){var ve=b.Z.Option,ge=h.Z.useForm(),pe=u()(ge,1),z=pe[0],Ee=(0,r.useParams)(),T=Ee.id,xe=(0,m.useState)({}),k=u()(xe,2),s=k[0],Y=k[1],je=(0,m.useState)(),q=u()(je,2),$=q[0],ye=q[1],Pe=(0,m.useState)([]),ee=u()(Pe,2),J=ee[0],te=ee[1],Ce=(0,m.useState)([]),ne=u()(Ce,2),M=ne[0],Q=ne[1],De=(0,m.useState)(),ae=u()(De,2),Ze=ae[0],X=ae[1],Oe=(0,m.useState)(""),ie=u()(Oe,2),le=ie[0],re=ie[1],G=(0,r.useIntl)(),se=(0,m.useCallback)(function(){T&&((0,r.request)("post/get/".concat(T)).then(function(n){Y(n),z.setFields([{name:"content",value:n.content},{name:"title",value:n.title},{name:"type",value:n.type},{name:"thumbnail",value:n.thumbnail},{name:"language",value:n.language}]),re(n.thumbnail)}),(0,r.request)("post/get-list-category-id-in-post/".concat(T)).then(function(n){te(n)}),(0,r.request)("post/attachment-list-in-post/".concat(T)).then(function(n){var i=n.map(function(a){return{uid:a.id,name:a.name,status:"done",url:"/files/".concat(a.id).concat(a.extension)}});Q(i)}))},[T]);(0,m.useEffect)(function(){se(),(0,r.request)("category/get-list?language=".concat((0,W.dK)(G.locale))).then(function(n){ye(n)})},[se]);var Ae=function(){var i=M.map(function(a){return{id:a.uid}});(0,r.request)("post/add",{method:"POST",data:{post:s,listCategoryId:J,attachments:i}}).then(function(a){a.succeeded?r.history.push("/post/list?type=".concat(s.type,"&language=").concat((0,W.dK)(G.locale))):v.ZP.error("ERROR"),X(!1)})},Te=function(){var i=M.map(function(a){return{id:a.uid}});(0,r.request)("post/update",{method:"POST",data:{post:s,listCategoryId:J,attachments:i}}).then(function(a){a.succeeded?r.history.push("/post/list?type=".concat(s.type,"&language=").concat((0,W.dK)(G.locale))):v.ZP.error("ERROR"),X(!1)})};function Fe(n){te(n)}var Ie=function(i){(0,r.request)("post/file/delete/".concat(i.uid),{method:"DELETE"}).then(function(a){a.succeeded?Q(M.filter(function(g){return g.uid!==i.uid})):v.ZP.error(a.message)})},Me=function(){var n=x()(l()().mark(function i(a){var g,o,ue;return l()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return g=new FormData,g.append("file",a),S.next=4,(0,r.request)("post/upload",{method:"POST",data:g});case 4:o=S.sent,ue={uid:o.attach.id,name:o.attach.name,status:"done",url:"/files/".concat(o.attach.id).concat(o.attach.extension)},Q([].concat(O()(M),[ue])),v.ZP.success("".concat(a.name," file uploaded successfully."));case 8:case"end":return S.stop()}},i)}));return function(a){return n.apply(this,arguments)}}(),Se={name:"file",multiple:!1,beforeUpload:Me,fileList:M,onRemove:Ie},Ne=function(){var n=x()(l()().mark(function i(a){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:a.type=Number(a.type),s.content=a.content,s.type=a.type,s.title=a.title,s.thumbnail=a.thumbnail,s.language=(0,W.dK)(G.locale),X(!0),T?Te():Ae();case 8:case"end":return o.stop()}},i)}));return function(a){return n.apply(this,arguments)}}();return(0,t.jsx)(me._z,{children:(0,t.jsx)(I.Z,{children:(0,t.jsx)(h.Z,{onFinish:Ne,layout:"vertical",form:z,children:(0,t.jsxs)(L.Z,{gutter:16,children:[(0,t.jsxs)(y.Z,{span:18,children:[(0,t.jsx)(h.Z.Item,{name:"title",label:"Ti\xEAu \u0111\u1EC1",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp ti\xEAu \u0111\u1EC1 b\xE0i vi\u1EBFt"}],children:(0,t.jsx)(d.Z,{})}),(0,t.jsx)("div",{className:"mb-1",children:"M\xF4 t\u1EA3"}),(0,t.jsx)(d.Z.TextArea,{value:s.description,onChange:function(i){return Y(c()(c()({},s),{},{description:i.target.value}))},className:"mb-2"}),(0,t.jsx)(h.Z.Item,{name:"content",label:"N\u1ED9i dung",children:(0,t.jsx)(C.Z,{name:"content"})}),(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(P.ZP,{type:"primary",htmlType:"submit",loading:Ze,children:"L\u01B0u l\u1EA1i"}),(0,t.jsx)(P.ZP,{onClick:function(){return r.history.push("/admin/post/list")},children:"H\u1EE7y"})]})]}),(0,t.jsxs)(y.Z,{span:6,children:[(0,t.jsxs)(L.Z,{gutter:16,children:[(0,t.jsx)(y.Z,{span:12,children:(0,t.jsx)(h.Z.Item,{label:"Lo\u1EA1i",name:"type",initialValue:p.NEWS,rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn lo\u1EA1i b\xE0i vi\u1EBFt"}],children:(0,t.jsx)(b.Z,{options:w})})}),(0,t.jsx)(y.Z,{span:12,children:(0,t.jsx)(h.Z.Item,{label:"Ng\xF4n ng\u1EEF",tooltip:"Chuy\u1EC3n ng\xF4n ng\u1EEF tr\xEAn thanh c\xF4ng c\u1EE5",children:(0,t.jsx)(d.Z,{disabled:!0,value:(0,r.getLocale)()})})})]}),(0,t.jsx)("div",{className:"mb-1",children:"Danh m\u1EE5c"}),(0,t.jsx)(b.Z,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Vui l\xF2ng ch\u1ECDn",onChange:Fe,className:"mb-2",value:J,optionFilterProp:"children",filterOption:function(i,a){return a.children.toLowerCase().indexOf(i.toLowerCase())>=0},children:$==null?void 0:$.map(function(n){return(0,t.jsx)(ve,{value:n.id,children:n.name},n.id)})}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(h.Z.Item,{label:"\u1EA2nh \u0111\u1EA1i di\u1EC7n",name:"thumbnail",style:{width:"100%"},children:(0,t.jsx)(d.Z,{suffix:(0,t.jsx)(B.Z,{beforeUpload:function(i){var a=i.type==="image/jpeg"||i.type==="image/png";if(a){var g=new FormData;return g.append("file",i),(0,r.request)("file/image/upload",{method:"POST",data:g}).then(function(o){if(!o.succeeded)return v.ZP.error(o.message),!1;z.setFieldValue("thumbnail",o.url),re(o.url)}),!1}else return v.ZP.error("You can only upload JPG or PNG file!"),!1},maxCount:1,showUploadList:!1,children:(0,t.jsx)(P.ZP,{icon:(0,t.jsx)(V.Z,{}),size:"small",children:"T\u1EA3i l\xEAn"})})})})}),(0,t.jsx)("div",{className:"mb-4",children:le?(0,t.jsx)(A.Z,{src:le,height:180,wrapperClassName:"w-full h-40",style:{width:"100%",objectFit:"cover"}}):(0,t.jsx)("div",{className:"h-40 border flex items-center justify-center",children:(0,t.jsx)(H.Z,{})})}),(0,t.jsx)("div",{className:"mb-1",children:"Ng\xE0y xu\u1EA5t b\u1EA3n"}),(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)(K.default,{onChange:function(i){return Y(c()(c()({},s),{},{modifiedDate:i==null?void 0:i.toDate()}))},value:de()(s==null?void 0:s.modifiedDate)})}),(0,t.jsx)("div",{className:"mb-1",children:"T\u1EC7p tin \u0111\xEDnh k\xE8m"}),(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsxs)(ce,c()(c()({},Se),{},{children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(U.Z,{})}),(0,t.jsx)("p",{className:"ant-upload-text",children:"Ch\u1ECDn t\u1EC7p tin \u0111\xEDnh k\xE8m"}),(0,t.jsx)("p",{className:"ant-upload-hint",children:"H\u1ED7 tr\u1EE3 c\xE1c \u0111\u1ECBnh d\u1EA1ng th\xF4ng d\u1EE5ng .docx, .xlsx, .pdf"})]}))})]})]})})})})},fe=he},26805:function(_,D,e){e.d(D,{dK:function(){return c},gB:function(){return F}});function N(l){return l.trim()}function c(l){return l?l==="vi-VN"?1:2:1}function F(l){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=Z?1e3:1024;if(Math.abs(l)<E)return l+" B";var x=Z?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],j=-1,u=Math.pow(10,O);do l/=E,++j;while(Math.round(Math.abs(l)*u)/u>=E&&j<x.length-1);return l.toFixed(O)+" "+x[j]}}}]);
