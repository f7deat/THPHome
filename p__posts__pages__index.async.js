"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6230],{52554:function(U,A,t){t.r(A),t.d(A,{default:function(){return Pe}});var O=t(34827),v=t.n(O),b=t(96338),N=t(70524),y=t(81068),L=t(64235),d=t(58703),S=t(15621),W=t(13762),G=t(2537),I=t(62380),i=t(68136),e=t(33130),J=function(){return(0,e.jsx)(e.Fragment,{})},X=J,w=t(53939),f=t.n(w),_=t(83134),D=t.n(_),ee=function(a){return(0,d.request)("post/get-list",{params:a})},te=function(a,s){return(0,d.request)("post/get-list",{params:a})},ne=function(a){return(0,d.request)("block/add",{method:"POST",data:a})},re=function(a){return(0,d.request)("block/list/".concat(a))},ae=function(a){return(0,d.request)("block/".concat(a))},se=function(a){return(0,d.request)("post/get/".concat(a))},oe=function(a){return(0,d.request)("block/options")},ue=function(a,s){return(0,d.request)("block/save/".concat(a),{method:"POST",data:s})},le=t(41220),V=t(43772),ie=t(91816),ce=function(a){var s=a.id,j=le.A.useFormInstance();return(0,i.useEffect)(function(){s&&ae(s).then(function(m){j.setFields([{name:"type",value:m.type},{name:"value",value:m.value}])})},[s]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{label:"Lo\u1EA1i",name:"type",options:[{label:"H1",value:"h1"},{label:"H2",value:"h2"},{label:"H3",value:"h3"},{label:"Paragraph",value:"paragraph"}]}),(0,e.jsx)(ie.Z,{label:"N\u1ED9i dung",name:"value"})]})},de=ce,ve=t(49799),fe=t(25223),me=t(58169),he=t(88821),ge=t(99894),Y=t(7482),M=t(16331),g=t(46665),xe=t(30339),pe=t(45941),ye=function(){var a=(0,d.useParams)(),s=a.id,j=(0,i.useState)([]),m=v()(j,2),q=m[0],z=m[1],R=(0,i.useState)(!1),P=v()(R,2),Z=P[0],k=P[1],$=(0,i.useState)(!1),C=v()($,2),H=C[0],B=C[1],K=(0,i.useState)(),E=v()(K,2),h=E[0],T=E[1],Q=(0,i.useRef)(),F=function(){s&&re(s).then(function(o){z(o.data)})};(0,i.useEffect)(function(){s&&F()},[s]);var Ze=function(){var l=D()(f()().mark(function o(n){var u;return f()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,te(n,s);case 2:u=x.sent,u.succeeded?(g.ZP.success("Deleted!"),F()):g.ZP.error(u.errors[0].description);case 4:case"end":return x.stop()}},o)}));return function(n){return l.apply(this,arguments)}}(),ke=function(){var l=D()(f()().mark(function o(n){return f()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.postId=s,r.next=3,ne(n);case 3:g.ZP.success("Added!"),B(!1),F();case 6:case"end":return r.stop()}},o)}));return function(n){return l.apply(this,arguments)}}(),Ce=[{key:"1",label:"Show / Hide"}],Be=function(){var l=D()(f()().mark(function o(n,u){var r;return f()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(n.key!=="1"){p.next=5;break}return p.next=3,se(u);case 3:r=p.sent,r.succeeded&&(g.ZP.success("Actived!"),F());case 5:case"end":return p.stop()}},o)}));return function(n,u){return l.apply(this,arguments)}}(),Te=[{title:"#",dataIndex:"sort",className:"drag-visible"},{title:"Lo\u1EA1i",dataIndex:"blockName"},{title:"T\xEAn",dataIndex:"name"},{title:"Tr\u1EA1ng th\xE1i",dataIndex:"active",valueEnum:{false:{text:"Draft",status:"Default"},true:{text:"Active",status:"Processing"}}},{title:"T\xE1c v\u1EE5",valueType:"option",render:function(o,n){return[(0,e.jsx)(S.ZP,{size:"small",type:"primary",disabled:n.autoGenerateField,icon:(0,e.jsx)(ve.Z,{}),onClick:function(){var r;T(n),(r=Q.current)===null||r===void 0||r.setFieldValue("id",n.id),k(!0)}},1),(0,e.jsx)(xe.Z,{title:"Are you sure?",onConfirm:function(){return Ze(n.id)},children:(0,e.jsx)(S.ZP,{size:"small",icon:(0,e.jsx)(fe.Z,{}),danger:!0,type:"primary"})},4),(0,e.jsx)(pe.Z,{menu:{items:Ce,onClick:function(r){return Be(r,n.id)}},children:(0,e.jsx)(S.ZP,{size:"small",icon:(0,e.jsx)(me.Z,{}),type:"dashed"})},"more")]}}],Ae=function(o){var n=o.map(function(u){return u.id||""});ee(n).then(function(u){u.succeeded&&(z(o),g.ZP.success("Saved!"))})},Oe=function(){return h?h.normalizedName==="TextBlock"?(0,e.jsx)(de,{id:h.id}):(0,e.jsx)(I.Z,{}):(0,e.jsx)(I.Z,{})},De=function(){var l=D()(f()().mark(function o(n){return f()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(h){r.next=2;break}return r.abrupt("return");case 2:return console.log(n),r.next=5,ue(h.id,n);case 5:g.ZP.success("Saved!"),k(!1);case 7:case"end":return r.stop()}},o)}));return function(n){return l.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"mb-2 flex justify-end gap-2",children:(0,e.jsx)(S.ZP,{onClick:function(){return B(!0)},type:"primary",icon:(0,e.jsx)(he.Z,{}),children:(0,e.jsx)("span",{children:"Th\xEAm m\u1EDBi"})},0)}),(0,e.jsx)(ge.Z,{search:!1,rowKey:"id",columns:Te,pagination:!1,dataSource:q,dragSortKey:"sort",onDragSortEnd:Ae}),(0,e.jsxs)(Y.Y,{open:H,title:"Add component",onOpenChange:B,onFinish:ke,children:[(0,e.jsx)(M.Z,{name:"name",label:"Name",rules:[{required:!0}]}),(0,e.jsx)(V.Z,{rules:[{required:!0}],request:oe,name:"blockId",label:"Block"})]}),(0,e.jsxs)(Y.Y,{open:Z,onOpenChange:k,title:"Block Configuration",onFinish:De,formRef:Q,children:[(0,e.jsx)(M.Z,{name:"id",hidden:!0}),(0,e.jsx)(M.Z,{name:"className",label:"Class Name"}),Oe()]})]})},Se=ye,je=function(){var a=(0,d.useParams)(),s=a.id,j=(0,i.useState)(!1),m=v()(j,2),q=m[0],z=m[1],R=(0,i.useState)(),P=v()(R,2),Z=P[0],k=P[1],$=(0,i.useState)("content"),C=v()($,2),H=C[0],B=C[1],K=function(){s&&(0,b.u)(s).then(function(T){return k(T)})};(0,i.useEffect)(function(){K()},[s]);var E=function(T){B(T)};return(0,e.jsx)(y._z,{title:Z==null?void 0:Z.name,extra:(0,e.jsx)(S.ZP,{icon:(0,e.jsx)(N.Z,{}),onClick:function(){return history.back()},children:(0,e.jsx)("span",{children:"Quay l\u1EA1i"})}),children:(0,e.jsxs)(W.Z,{gutter:16,children:[(0,e.jsx)(G.Z,{span:18,children:(0,e.jsx)(L.Z,{tabs:{tabPosition:"top",activeKey:H,items:[{label:"N\u1ED9i dung",key:"content",children:(0,e.jsx)(Se,{})},{label:"C\xE0i \u0111\u1EB7t",key:"setting",children:(0,e.jsx)(X,{})}],onChange:E},className:"mb-4"})}),(0,e.jsx)(G.Z,{span:6,children:(0,e.jsx)(L.Z,{title:"Preview",children:(0,e.jsx)(I.Z,{})})})]})})},Pe=je},96338:function(U,A,t){t.d(A,{A:function(){return v},u:function(){return b}});var O=t(58703),v=function(y){return(0,O.request)("post/get-list",{params:y})},b=function(y){return(0,O.request)("post/get/".concat(y))}}}]);
